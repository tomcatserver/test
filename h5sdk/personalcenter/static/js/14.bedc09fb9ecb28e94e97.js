webpackJsonp([14,32],{435:function(e,t,o){o(534);var i=o(119)(o(481),o(612),null,null);e.exports=i.exports},462:function(e,t,o){"use strict";var i="@@clickoutsideContext";t.a={bind:function(e,t,o){var s=function(t){o.context&&!e.contains(t.target)&&o.context[e[i].methodName]()};e[i]={documentHandler:s,methodName:t.expression,arg:t.arg||"click"},document.addEventListener(e[i].arg,s)},update:function(e,t){e[i].methodName=t.expression},unbind:function(e){document.removeEventListener(e[i].arg,e[i].documentHandler)},install:function(e){e.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},481:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(77),s=o(462);t.default={name:"bindingPhone",data:function(){return{showAlert:!1,showFailedAlert:!1,newMobile:"",stepMobiCode:{title:"",imgCode:"",tips:"",mobiCode:"",sCodeSrc:"",sCodeIdentity:"",isGetCode:!1,disableGetCode:!0},mobileActive:!1,imgCodeActive:!1,mobiCodeActive:!1,countDown:60}},computed:{stepMobiCodeSrc:function(){return this.stepMobiCode.sCodeSrc?"data:image/jpg;base64,"+this.stepMobiCode.sCodeSrc:""},btnDisabled:function(){return!(this.newMobile&&this.stepMobiCode.imgCode&&this.stepMobiCode.mobiCode)}},directives:{Clickoutside:s.a},created:function(){common.setPageTitle("1药网手机认证"),this.getImgCode()},methods:{mobileCloseActive:function(){this.mobileActive=!1},imgCodeCloseActive:function(){this.imgCodeActive=!1},mobiCodeCloseActive:function(){this.mobiCodeActive=!1},goback:function(){common.isApp()?jsBridge.shutDown({},function(e){}):this.$router.back()},countMobileCode:function(e){var t=this;if(console.log(e),0==this.countDown)return this.stepMobiCode.disableGetCode=!1,e.innerText="获取验证码",void(this.countDown=60);this.stepMobiCode.disableGetCode=!0,e.innerText=this.countDown+"s后重新发送",this.countDown--,setTimeout(function(){t.countMobileCode(e)},1e3)},onPicCodeInput:function(){this.stepMobiCode.isGetCode||(this.stepMobiCode.disableGetCode=!(this.stepMobiCode.imgCode.length>0))},sureBindcomplete:function(){var e=this;if(common.isApp())jsBridge.shutDown({},function(e){});else{this.showAlert=!1;var t=this.$route.query.returnUrl;t?window.location.replace(decodeURIComponent(t)):e.$router.push({path:"/"})}},bindFailedcomplete:function(){this.showFailedAlert=!1},getImgCode:function(){var e=this,t={};this.requestNetUtil("get","dev","xpassport/getPicCode",t,function(t){var o=t;o&&(e.stepMobiCode.sCodeSrc=o.imgsrc,e.stepMobiCode.sCodeIdentity=o.identity)},function(e){console.log("failed net: "+e)})},getMobiCode:function(e){if(this.stepMobiCode.tips="",this.newMobile.length<=0)return void(this.stepMobiCode.tips="请输入新手机号码");if(this.stepMobiCode.imgCode.length<=0)return void(this.stepMobiCode.tips="请输入图片验证码");if(0==/^1[3-9][0-9]{9}$/.test(this.newMobile))return void(this.stepMobiCode.tips="手机号码格式不对");var t={identity:this.stepMobiCode.sCodeIdentity,code:this.stepMobiCode.imgCode,mobile:this.newMobile,type:3},o=this,t={identity:this.stepMobiCode.sCodeIdentity,code:this.stepMobiCode.imgCode,mobile:this.newMobile,type:3};this.requestNetUtil("post","dev","xpassport/sendSms",t,function(t){o.stepMobiCode.isGetCode=!0,o.stepMobiCode.disableGetCode=!0,o.stepMobiCode.title="已向绑定手机号"+o.newMobile+"发送短信",o.countMobileCode(e.target)},function(e){console.log("failed net: "+e)})},sureChangeMobile:function(){var e=this;if(this.stepMobiCode.tips="",this.newMobile.length<=0)return void(this.stepMobiCode.tips="请输入手机号码");if(0==/^1[3-9][0-9]{9}$/.test(this.newMobile))return void(this.stepMobiCode.tips="手机号码格式不对");if(this.stepMobiCode.imgCode.length<=0)return void(this.stepMobiCode.tips="请输入图片验证码");if(this.stepMobiCode.mobiCode.length<=0)return void(this.stepMobiCode.tips="请输入手机验证码");var t={smscode:this.stepMobiCode.mobiCode,mobile:this.newMobile};this.requestNetUtil("post","dev","xpassport/bindMobile",t,function(t){e.showAlert=!0,e.showFailedAlert=!1},function(e){console.log("failed net: "+e)})},requestNetUtil:function(e,t,o,s,n,d){var c=this;i.c.http({showLoad:!0,method:e,urlPrefix:t,url:o,params:s,_timeout:1e4}).then(function(e){var t=c;console.info("rtn_111: "+e.body.rtn_ext),console.info("datas: "+e.body.data),"0"===e.body.rtn_code?n&&n(e.body.data):1*e.body.rtn_code==2?common.isApp()?jsBridge.toNativedetail({topage:"login"},function(e){}):window.location.href="//m.111.com.cn/yyw/wap/login/#/?returnUrl="+encodeURIComponent("//m.111.com.cn/yyw/wap/personalcenter/#/accountCenter"):("xpassport/getPicCode"==o?common.msgShow("抱歉，请求失败，请稍候重试"):"xpassport/bindMobile"==o?(c.showAlert=!1,c.showFailedAlert=!0,t.stepMobiCode.isGetCode=!1,t.stepMobiCode.disableGetCode=!1,t.stepMobiCode.mobiCode="",t.stepMobiCode.imgCode="",t.stepMobiCode.tips=e.body.rtn_tip):(t.stepMobiCode.isGetCode=!1,t.stepMobiCode.disableGetCode=!1,t.stepMobiCode.mobiCode="",t.stepMobiCode.imgCode="",t.stepMobiCode.tips=e.body.rtn_tip),t.getImgCode())},function(e){common.msgShow("网络开小差了，请稍候重试"),d&&d(e)})}}}},534:function(e,t){},612:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main"},[o("div",{staticStyle:{position:"fixed",width:"100%",background:"#fff",height:"100%","z-index":"0"}}),e._v(" "),o("header",{staticClass:"bar bar_nav"},[o("a",{staticClass:"top_icon icon_back fl",attrs:{href:"javascript:;"}},[o("i",{staticClass:"icon iconfont icon_leftarrow",on:{click:e.goback}})]),e._v(" "),o("div",{staticClass:"top_title"},[e._v("手机认证")])]),e._v(" "),o("div",{staticClass:"content login_page"},[o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.mobileCloseActive,expression:"mobileCloseActive"}],staticClass:"item_control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.newMobile,expression:"newMobile"}],staticClass:"item_input",attrs:{type:"tel",placeholder:"请输入手机号",maxlength:"11",autocomplete:"off"},domProps:{value:e._s(e.newMobile)},on:{focus:function(t){e.mobileActive=!0},input:function(t){t.target.composing||(e.newMobile=t.target.value)}}}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.newMobile&&e.mobileActive,expression:"newMobile && mobileActive"}],staticClass:"icon_clear show",on:{click:function(t){e.newMobile=""}}})]),e._v(" "),o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.imgCodeCloseActive,expression:"imgCodeCloseActive"}],staticClass:"item_control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.stepMobiCode.imgCode,expression:"stepMobiCode.imgCode"}],staticClass:"item_input img_code",attrs:{type:"text",placeholder:"图片验证码",autocomplete:"off",maxlength:"4"},domProps:{value:e._s(e.stepMobiCode.imgCode)},on:{focus:function(t){e.imgCodeActive=!0},input:[function(t){t.target.composing||(e.stepMobiCode.imgCode=t.target.value)},e.onPicCodeInput]}}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.stepMobiCode.imgCode&&e.imgCodeActive,expression:"stepMobiCode.imgCode && imgCodeActive"}],staticClass:"icon_clear show",on:{click:function(t){e.stepMobiCode.imgCode=""}}}),e._v(" "),o("div",{staticClass:"code_box code_text",on:{click:e.getImgCode}},[o("img",{attrs:{src:e.stepMobiCodeSrc}}),e._v(" "),o("div",{staticClass:"change_code"},[e._v("换一张")])])]),e._v(" "),o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.mobiCodeCloseActive,expression:"mobiCodeCloseActive"}],staticClass:"item_control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.stepMobiCode.mobiCode,expression:"stepMobiCode.mobiCode"}],staticClass:"item_input img_code",attrs:{type:"text",placeholder:"手机验证码",autocomplete:"off",maxlength:"6"},domProps:{value:e._s(e.stepMobiCode.mobiCode)},on:{focus:function(t){e.mobiCodeActive=!0},input:function(t){t.target.composing||(e.stepMobiCode.mobiCode=t.target.value)}}}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.stepMobiCode.mobiCode&&e.mobiCodeActive,expression:"stepMobiCode.mobiCode && mobiCodeActive"}],staticClass:"icon_clear show",on:{click:function(t){e.stepMobiCode.mobiCode=""}}}),e._v(" "),o("button",{staticClass:"btn_code",attrs:{disabled:e.stepMobiCode.disableGetCode},on:{click:e.getMobiCode}},[e._v("获取验证码")])]),e._v(" "),e.stepMobiCode.tips?o("div",{staticClass:"item_tips"},[o("p",[e._v(e._s(e.stepMobiCode.tips))])]):e._e(),e._v(" "),o("button",{staticClass:"btn_default btn_red btn_block mt20",attrs:{disabled:e.btnDisabled},on:{click:function(t){t.preventDefault(),e.sureChangeMobile(t)}}},[e._v("确定")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:this.showAlert,expression:"this.showAlert"}],staticClass:"pop_pop show"},[o("div",{staticClass:"pop_box"},[e._m(0),e._v(" "),e._m(1),e._v(" "),o("button",{staticClass:"btn_default btn_red btn_block",on:{click:e.sureBindcomplete}},[e._v("确定")])])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:this.showFailedAlert,expression:"this.showFailedAlert"}],staticClass:"pop_pop show"},[o("div",{staticClass:"pop_box"},[e._m(2),e._v(" "),o("button",{staticClass:"btn_default btn_black btn_block",on:{click:e.bindFailedcomplete}},[e._v("确定")])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pop_top"},[o("div",{staticClass:"h5_ok"},[o("span",[e._v("认证成功！")])])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pop_content"},[o("p",{staticClass:"t_c"},[e._v("特别提示：您以后也可用此手机号登陆")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pop_top"},[o("div",[o("span",[e._v("认证失败！")])])])}]}}});
//# sourceMappingURL=14.bedc09fb9ecb28e94e97.js.map