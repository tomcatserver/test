webpackJsonp([13,32],{438:function(e,o,t){t(552);var i=t(119)(t(484),t(630),null,null);e.exports=i.exports},462:function(e,o,t){"use strict";var i="@@clickoutsideContext";o.a={bind:function(e,o,t){var s=function(o){t.context&&!e.contains(o.target)&&t.context[e[i].methodName]()};e[i]={documentHandler:s,methodName:o.expression,arg:o.arg||"click"},document.addEventListener(e[i].arg,s)},update:function(e,o){e[i].methodName=o.expression},unbind:function(e){document.removeEventListener(e[i].arg,e[i].documentHandler)},install:function(e){e.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},484:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=t(77),s=t(462);o.default={name:"changePassword",data:function(){return{telePhone:"",stepMobiCode:{title:"",imgCode:"",tips:"",mobiCode:"",sCodeSrc:"",sCodeIdentity:"",isGetCode:!1,disableGetCode:!0,password:"",passwordShow:!1},passwordActive:!1,imgCodeActive:!1,mobiCodeActive:!1,countDown:60}},computed:{stepMobiCodeSrc:function(){return this.stepMobiCode.sCodeSrc?"data:image/jpg;base64,"+this.stepMobiCode.sCodeSrc:""}},directives:{Clickoutside:s.a},created:function(){common.setPageTitle("1药网修改密码"),this.telePhone=this.$route.params.telePhone,this.stepMobiCode.title="已认证手机号："+this.changePhone(this.$route.params.telePhone),this.getImgCode()},methods:{passwordCloseActive:function(){this.passwordActive=!1},imgCodeCloseActive:function(){this.imgCodeActive=!1},mobiCodeCloseActive:function(){this.mobiCodeActive=!1},clearField:function(e){var o=this;switch(e){case 1:o.stepMobiCode.imgCode="";break;case 2:o.stepMobiCode.mobiCode="";break;case 3:o.stepMobiCode.password=""}},showOrHidePassword:function(){console.log("显示or隐藏密码"),this.stepMobiCode.passwordShow=!this.stepMobiCode.passwordShow},countMobileCode:function(e){var o=this;if(0==this.countDown)return this.stepMobiCode.disableGetCode=!1,e.innerText="获取验证码",void(this.countDown=60);this.stepMobiCode.disableGetCode=!0,e.innerText=this.countDown+"s后重新发送",this.countDown--,setTimeout(function(){o.countMobileCode(e)},1e3)},onPicCodeInput:function(){this.stepMobiCode.isGetCode||(this.stepMobiCode.disableGetCode=!(this.stepMobiCode.imgCode.length>0))},changePhone:function(e){var o=e;return 11==e.length&&o&&(o=e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")),o},getImgCode:function(){var e=this,o={};this.requestNetUtil("get","dev","xpassport/getPicCode",o,function(o){var t=o;t&&(e.stepMobiCode.sCodeSrc=t.imgsrc,e.stepMobiCode.sCodeIdentity=t.identity)},function(e){console.log("failed net: "+e)})},getMobiCode:function(e){var o=this;if(this.stepMobiCode.tips="",this.stepMobiCode.imgCode.length<=0)return void(this.stepMobiCode.tips="请输入图片验证码");var t={identity:this.stepMobiCode.sCodeIdentity,code:this.stepMobiCode.imgCode,mobile:this.telePhone,type:3};this.requestNetUtil("post","dev","xpassport/sendSms",t,function(t){o.stepMobiCode.isGetCode=!0,o.stepMobiCode.disableGetCode=!0,o.stepMobiCode.title="已向绑定手机号"+o.changePhone(o.$route.params.telePhone)+"发送短信",o.countMobileCode(e.target)},function(e){console.log("failed net: "+e)})},makeSurePassword:function(){var e=this;if(this.stepMobiCode.imgCode.length<=0)return void(this.stepMobiCode.tips="请输入图片验证码");if(this.stepMobiCode.mobiCode.length<=0)return void(this.stepMobiCode.tips="请输入手机验证码");if(this.stepMobiCode.password.length<=0)return void(this.stepMobiCode.tips="请输入新密码");if(this.stepMobiCode.password.indexOf(" ")>=0)return void(this.stepMobiCode.tips="密码不能含有空格");var o={smscode:this.stepMobiCode.mobiCode,mobile:this.telePhone,password:encodeURIComponent(this.stepMobiCode.password)};this.requestNetUtil("post","dev","xpassport/updatePasswordInByPhone",o,function(o){common.msgShow("密码修改成功!");var t=o;common.isApp()?t&&setTimeout(function(){jsBridge.updateLoginToken({token:t.token,glToken:t.newtoken},function(e){})},3e3):(t&&(common.cookie("gltoken",t.newtoken),common.cookie("token",t.token),common.cookie("UserInfo",t.loginStr),t.mobile&&e.rightPhoneNumber(t.mobile)?common.cookie("fpdMobile",t.mobile,100):common.cookie("fpdMobile","",-1)),common.cookie("isNormalLogin",1,-1),setTimeout(function(){location.href="//m.111.com.cn/yyw/wap/login/#/?returnUrl="+encodeURIComponent("//m.111.com.cn/yyw/wap/personalcenter/#/")},3e3))},function(e){console.log("failed net: "+e)})},goback:function(){common.isApp()?jsBridge.shutDown({},function(e){}):this.$router.back()},requestNetUtil:function(e,o,t,s,n,d){var a=this;i.c.http({showLoad:!0,method:e,urlPrefix:o,url:t,params:s,_timeout:1e4}).then(function(e){var o=a;console.info("rtn_111: "+e.body.rtn_ext),console.info("datas: "+e.body.data),"0"===e.body.rtn_code?n&&n(e.body.data):1*e.body.rtn_code==2?common.isApp()?jsBridge.toNativedetail({topage:"login"},function(e){}):window.location.href="//m.111.com.cn/yyw/wap/login/index.html?returnUrl="+encodeURIComponent("//m.111.com.cn/yyw/wap/personalcenter/#/accountCenter"):("xpassport/getPicCode"==t?common.msgShow("抱歉，请求失败，请稍候重试"):("xpassport/sendSms"==t&&(o.stepMobiCode.isGetCode=!1,o.stepMobiCode.disableGetCode=!1,o.stepMobiCode.mobiCode="",o.stepMobiCode.imgCode=""),o.stepMobiCode.tips=e.body.rtn_tip),"xpassport/updatePasswordInByPhone"!=t&&o.getImgCode())},function(e){common.msgShow("网络开小差了，请稍候重试"),d&&d(e)})},rightPhoneNumber:function(e){return/^1[3-9][0-9]{9}$/.test(e)}}}},552:function(e,o){},630:function(e,o){e.exports={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"main"},[t("div",{staticStyle:{position:"fixed",width:"100%",background:"#fff",height:"100%","z-index":"0"}}),e._v(" "),t("header",{staticClass:"bar bar_nav"},[t("a",{staticClass:"top_icon icon_back fl",attrs:{href:"javascript:;"}},[t("i",{staticClass:"icon iconfont icon_leftarrow",on:{click:e.goback}})]),e._v(" "),t("div",{staticClass:"top_title"},[e._v("修改密码")])]),e._v(" "),t("div",{staticClass:"content login_page"},[t("div",{staticClass:"item_top t_l"},[t("span",[e._v(e._s(e.stepMobiCode.title))])]),e._v(" "),t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.imgCodeCloseActive,expression:"imgCodeCloseActive"}],staticClass:"item_control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.stepMobiCode.imgCode,expression:"stepMobiCode.imgCode"}],staticClass:"item_input img_code",attrs:{type:"text",placeholder:"图片验证码",autocomplete:"off",maxlength:"4"},domProps:{value:e._s(e.stepMobiCode.imgCode)},on:{focus:function(o){e.imgCodeActive=!0},input:[function(o){o.target.composing||(e.stepMobiCode.imgCode=o.target.value)},e.onPicCodeInput]}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.stepMobiCode.imgCode&&e.imgCodeActive,expression:"stepMobiCode.imgCode && imgCodeActive"}],staticClass:"icon_clear show",staticStyle:{display:"block"},on:{click:function(o){e.clearField(1)}}}),e._v(" "),t("div",{staticClass:"code_box code_text",on:{click:e.getImgCode}},[t("img",{attrs:{src:e.stepMobiCodeSrc}}),e._v(" "),t("div",{staticClass:"change_code"},[e._v("换一张")])])]),e._v(" "),t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.mobiCodeCloseActive,expression:"mobiCodeCloseActive"}],staticClass:"item_control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.stepMobiCode.mobiCode,expression:"stepMobiCode.mobiCode"}],staticClass:"item_input img_code",attrs:{type:"text",placeholder:"手机验证码",autocomplete:"off",maxlength:"6"},domProps:{value:e._s(e.stepMobiCode.mobiCode)},on:{focus:function(o){e.mobiCodeActive=!0},input:function(o){o.target.composing||(e.stepMobiCode.mobiCode=o.target.value)}}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.stepMobiCode.mobiCode&&e.mobiCodeActive,expression:"stepMobiCode.mobiCode && mobiCodeActive"}],staticClass:"icon_clear show",on:{click:function(o){e.clearField(2)}}}),e._v(" "),t("button",{staticClass:"btn_code",attrs:{disabled:e.stepMobiCode.disableGetCode},on:{click:e.getMobiCode}},[e._v("获取验证码")])]),e._v(" "),t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.passwordCloseActive,expression:"passwordCloseActive"}],staticClass:"item_control"},[e.stepMobiCode.passwordShow?t("input",{directives:[{name:"model",rawName:"v-model",value:e.stepMobiCode.password,expression:"stepMobiCode.password"}],staticClass:"item_input item_password",attrs:{type:"text",placeholder:"新密码",autocomplete:"off"},domProps:{value:e._s(e.stepMobiCode.password)},on:{focus:function(o){e.passwordActive=!0},input:function(o){o.target.composing||(e.stepMobiCode.password=o.target.value)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.stepMobiCode.password,expression:"stepMobiCode.password"}],staticClass:"item_input item_password",attrs:{type:"password",placeholder:"新密码",autocomplete:"off"},domProps:{value:e._s(e.stepMobiCode.password)},on:{focus:function(o){e.passwordActive=!0},input:function(o){o.target.composing||(e.stepMobiCode.password=o.target.value)}}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.stepMobiCode.password&&e.passwordActive,expression:"stepMobiCode.password && passwordActive"}],staticClass:"icon_clear show",on:{click:function(o){e.clearField(3)}}}),e._v(" "),t("div",{staticClass:"checkbtn",class:{active:e.stepMobiCode.passwordShow},on:{click:e.showOrHidePassword}})]),e._v(" "),t("div",{staticClass:"item_tips"},[t("p",[e._v(e._s(e.stepMobiCode.tips))])]),e._v(" "),t("button",{staticClass:"btn_default btn_red btn_block mt20",attrs:{id:"btn_submit"},on:{click:e.makeSurePassword}},[e._v("确定")])])])},staticRenderFns:[]}}});
//# sourceMappingURL=13.c0110d14ff4b4208fb6f.js.map