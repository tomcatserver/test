webpackJsonp([15,32],{457:function(e,a,t){t(525);var s=t(119)(t(503),t(603),null,null);e.exports=s.exports},503:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t(120),i=t.n(s),n=t(177);a.default={name:"health",data:function(){return{changeFlag:!1,habitsTab:0,sex:0,birthday:"选择日期",pregnancyStatus:0,smoking:0,drinking:0,tea:0,coffee:0,likeSpicy:0,likeGreasy:0,highBloodPressure:0,heartDisease:0,diabetes:0,hasHepatorenal:0,gotoLogin:"//m.111.com.cn/yyw/wap/login/#/?returnUrl="+encodeURIComponent("//m.111.com.cn/yyw/wap/personalcenter/#/health"),picker:{}}},created:function(){common.setPageTitle("1药网_健康档案")},beforeDestroy:function(){this.picker&&this.picker.onCancel&&this.picker.onCancel()},updated:function(){},mounted:function(){this.getHealthData()},methods:{hasToken:function(){var e=this;common.isLogin(function(a){a||(window.location.href=e.gotoLogin)})},getHealthData:function(){var e=this;this.hasToken();var a={};n.a.http({showLoad:!0,method:"post",url:"customer/healthData/query",params:a}).then(function(a){if(0==a.body.rtn_code){if(a.body.data){var t=a.body.data;e.sex=t.sex,""!=t.birthday&&(e.birthday=t.birthday),e.pregnancyStatus=t.pregnancyStatus,e.smoking=t.smoking,e.drinking=t.drinking,e.tea=t.tea,e.coffee=t.coffee,e.likeSpicy=t.likeSpicy,e.likeGreasy=t.likeGreasy,e.highBloodPressure=t.highBloodPressure,e.heartDisease=t.heartDisease,e.diabetes=t.diabetes,e.hasHepatorenal=t.hasHepatorenal}}else"000000000002"==a.body.rtn_code&&(window.location.href=e.gotoLogin+"&isUseful=1")})},saveHealthInfo:function(){var e=this;if(this.hasToken(),!this.changeFlag)return window.location.href="//m.111.com.cn/yyw/wap/personalcenter/#/",!1;var a={};a.sex=this.sex,a.birthday=this.birthday,a.pregnancyStatus=this.pregnancyStatus,a.smoking=this.smoking,a.drinking=this.drinking,a.tea=this.tea,a.coffee=this.coffee,a.likeSpicy=this.likeSpicy,a.likeGreasy=this.likeGreasy,a.highBloodPressure=this.highBloodPressure,a.heartDisease=this.heartDisease,a.hasDiabetes=this.diabetes,a.hasHepatorenal=this.hasHepatorenal;var t={healthdata:i()(a)};n.a.http({showLoad:!0,method:"post",url:"customer/healthData/save",params:t}).then(function(a){"0"==a.body.rtn_code?(common.msgShow("保存成功！"),window.location.href="//m.111.com.cn/yyw/wap/personalcenter/#/"):"000000000002"==a.body.rtn_code&&(window.location.href=e.gotoLogin+"&isUseful=1")})},goBack:function(){this.$router.go(-1)},changeHabitsTab:function(e){this.habitsTab=e},setSex:function(e){this.sex!=e&&(this.changeFlag=!0),this.sex=e},showPicker:function(e){var a=this,t=this,s=["是","否"];this.picker=this.$Picker({slots:[{type:"data",flex:1,values:s,textAlign:"center"}],onConfirm:function(s,i){var n=0;switch("是"==i.slot0?n=1:"否"==i.slot0&&(n=2),e){case"smoking":a.smoking!=n&&(a.changeFlag=!0),t.smoking=n;break;case"drinking":a.drinking!=n&&(a.changeFlag=!0),t.drinking=n;break;case"tea":a.tea!=n&&(a.changeFlag=!0),t.tea=n;break;case"coffee":a.coffee!=n&&(a.changeFlag=!0),t.coffee=n;break;case"likeSpicy":a.likeSpicy!=n&&(a.changeFlag=!0),t.likeSpicy=n;break;case"likeGreasy":a.likeGreasy!=n&&(a.changeFlag=!0),t.likeGreasy=n;break;case"highBloodPressure":a.highBloodPressure!=n&&(a.changeFlag=!0),t.highBloodPressure=n;break;case"heartDisease":a.heartDisease!=n&&(a.changeFlag=!0),t.heartDisease=n;break;case"diabetes":a.diabetes!=n&&(a.changeFlag=!0),t.diabetes=n;break;case"hasHepatorenal":a.hasHepatorenal!=n&&(a.changeFlag=!0),t.hasHepatorenal=n}s.value=!1}}),console.log(this.picker)},hunyuPicker:function(){var e=this,a=this,t=["未婚","已婚未育","妊娠中","已婚已育"];this.picker=this.$Picker({slots:[{type:"data",flex:1,values:t,textAlign:"center"}],onConfirm:function(t,s){var i=0;"未婚"==s.slot0?i=1:"已婚未育"==s.slot0?i=2:"妊娠中"==s.slot0?i=3:"已婚已育"==s.slot0&&(i=4),e.pregnancyStatus!=i&&(e.changeFlag=!0),a.pregnancyStatus=i,t.value=!1}})},showDatePicker:function(){var e=this,a=function(e){for(var a=(new Date).getFullYear(),t=[],s=a-e;s<=a;s++)t.push(s);return t},t=function(e,a){for(var t=new Date(e,a,0),s=[],i=1;i<=t.getDate();i++)s.push(i);return s};this.picker=this.$Picker({slots:[{type:"data",flex:1,values:a(100),textAlign:"center",defaultValue:(new Date).getFullYear()-50},{type:"divider",content:"-"},{type:"data",flex:1,values:[1,2,3,4,5,6,7,8,9,10,11,12],textAlign:"center",defaultValue:(new Date).getMonth()+1},{type:"divider",content:"-"},{type:"data",flex:1,values:t((new Date).getFullYear(),(new Date).getMonth()+1),textAlign:"center",defaultValue:(new Date).getDate()}],onConfirm:function(a,t){var s=t.slot0+" - "+t.slot2+" - "+t.slot4;e.birthday!=s&&(e.changeFlag=!0),e.birthday=s,a.value=!1},onChange:function(e,a){0!==a.changedSlotIndex&&2!==a.changedSlotIndex||e.setSlotValues(4,t(a.val.slot0,a.val.slot2,0),a.val.slot4-1)}})}}}},525:function(e,a){},603:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"health_page"},[t("header",{staticClass:"user_common_header"},[t("a",{staticClass:"common_header_left_btn",attrs:{href:"javascript:void(0)"},on:{click:e.goBack}},[t("i",{staticClass:"icon iconfont icon_leftarrow"})]),e._v(" "),t("span",{staticClass:"user_header_title"},[e._v("健康档案")]),e._v(" "),t("span",{staticClass:"common_header_right_btn",on:{click:e.saveHealthInfo}},[e._v("\n\t\t\t保存\n\t\t")])]),e._v(" "),t("div",{staticClass:"health_warm"},[e._v("为了向您推荐更精准的服务，请完善个人基本信息")]),e._v(" "),t("div",{staticClass:"health_base_info"},[t("div",{staticClass:"health_base_unit"},[t("ul",{staticClass:"unit_right sexuality_ul",attrs:{"data-ywpoint":"myhealthprofile_myinformation_0_mygender_0_0"}},[t("li",{class:{cur:1==e.sex},on:{click:function(a){e.setSex(1)}}},[t("i",{staticClass:"icon iconfont",class:{icon_nocheck:1!=e.sex,icon_danxuan:1==e.sex}}),e._v("男\n\t\t\t\t\t")]),e._v(" "),t("li",{class:{cur:2==e.sex},on:{click:function(a){e.setSex(2)}}},[t("i",{staticClass:"icon iconfont",class:{icon_nocheck:2!=e.sex,icon_danxuan:2==e.sex}}),e._v("女\n\t\t\t\t")])]),e._v("\n\t\t\t性 别：\n\t\t")]),e._v(" "),t("div",{staticClass:"health_base_unit",attrs:{"data-ywpoint":"myhealthprofile_myinformation_0_dateofbirth_0_0"},on:{click:e.showDatePicker}},[t("span",{staticClass:"unit_right",class:{gray_span:"选择日期"==e.birthday}},[e._v("\n\t\t\t\t"+e._s(e.birthday)+"\n\t\t\t")]),e._v(" 出生日期：\n\t\t")]),e._v(" "),t("div",{staticClass:"health_base_unit",attrs:{"data-ywpoint":"myhealthprofile_myinformation_0_pregnancystatus_0_0"},on:{click:e.hunyuPicker}},[t("span",{staticClass:"unit_right",class:{gray_span:0==e.pregnancyStatus}},[0==e.pregnancyStatus?t("i",[e._v("选择状态")]):e._e(),e._v(" "),1==e.pregnancyStatus?t("i",[e._v("未婚")]):e._e(),e._v(" "),2==e.pregnancyStatus?t("i",[e._v("已婚未育")]):e._e(),e._v(" "),3==e.pregnancyStatus?t("i",[e._v("妊娠中")]):e._e(),e._v(" "),4==e.pregnancyStatus?t("i",[e._v("已婚已育")]):e._e()]),e._v(" 婚育状态：\n\t\t")])]),e._v(" "),t("div",{staticClass:"health_tab_div"},[t("ul",{staticClass:"health_tab"},[t("li",{class:{cur:0==e.habitsTab},on:{click:function(a){e.changeHabitsTab(0)}}},[e._v("生活习惯")]),e._v(" "),t("li",{class:{cur:1==e.habitsTab},on:{click:function(a){e.changeHabitsTab(1)}}},[e._v("健康状况")])])]),e._v(" "),t("div",{staticClass:"tab_con"},[0==e.habitsTab?t("ul",{staticClass:"tab_ul life_habits_ul"},[t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_lifestyle_smoke_0_0"},on:{click:function(a){e.showPicker("smoking")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.smoking}},[1==e.smoking?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.smoking||0==e.smoking?t("i",[e._v("否")]):e._e()]),e._v("是否吸烟：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_lifestyle_drink_0_0"},on:{click:function(a){e.showPicker("drinking")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.drinking}},[1==e.drinking?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.drinking||0==e.drinking?t("i",[e._v("否")]):e._e()]),e._v("是否饮酒：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_lifestyle_tea_0_0"},on:{click:function(a){e.showPicker("tea")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.tea}},[1==e.tea?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.tea||0==e.tea?t("i",[e._v("否")]):e._e()]),e._v("是否经常饮茶：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_lifestyle_coffee_0_0"},on:{click:function(a){e.showPicker("coffee")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.coffee}},[1==e.coffee?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.coffee||0==e.coffee?t("i",[e._v("否")]):e._e()]),e._v("是否经常喝咖啡：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_lifestyle_spicy_0_0"},on:{click:function(a){e.showPicker("likeSpicy")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.likeSpicy}},[1==e.likeSpicy?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.likeSpicy||0==e.likeSpicy?t("i",[e._v("否")]):e._e()]),e._v("是否喜欢吃辛辣的食物：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_lifestyle_greasy_0_0"},on:{click:function(a){e.showPicker("likeGreasy")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.likeGreasy}},[1==e.likeGreasy?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.likeGreasy||0==e.likeGreasy?t("i",[e._v("否")]):e._e()]),e._v("是否喜欢吃油腻的食物：")])]):e._e(),e._v(" "),1==e.habitsTab?t("ul",{staticClass:"tab_ul health_ul"},[t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_healthsituation_hypertension_0_0"},on:{click:function(a){e.showPicker("highBloodPressure")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.highBloodPressure}},[1==e.highBloodPressure?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.highBloodPressure||0==e.highBloodPressure?t("i",[e._v("否")]):e._e()]),e._v("是否有高血压：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_healthsituation_heartdisease_0_0"},on:{click:function(a){e.showPicker("heartDisease")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.heartDisease}},[1==e.heartDisease?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.heartDisease||0==e.heartDisease?t("i",[e._v("否")]):e._e()]),e._v("是否有心脏病：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_healthsituation_diabetes_0_0"},on:{click:function(a){e.showPicker("diabetes")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.diabetes}},[1==e.diabetes?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.diabetes||0==e.diabetes?t("i",[e._v("否")]):e._e()]),e._v("是否有糖尿病：")]),e._v(" "),t("li",{attrs:{"data-ywpoint":"myhealthprofile_moreinformation_healthsituation_liverandkidney_0_0"},on:{click:function(a){e.showPicker("hasHepatorenal")}}},[t("span",{staticClass:"span_no",class:{span_yes:1==e.hasHepatorenal}},[1==e.hasHepatorenal?t("i",[e._v("是")]):e._e(),e._v(" "),2==e.hasHepatorenal||0==e.hasHepatorenal?t("i",[e._v("否")]):e._e()]),e._v("是否有肝肾疾病：")])]):e._e()])])},staticRenderFns:[]}}});
//# sourceMappingURL=15.8c5b2590b3f76880f3c0.js.map