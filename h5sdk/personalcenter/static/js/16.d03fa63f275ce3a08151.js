webpackJsonp([16,32],{455:function(e,t,a){a(536);var s=a(119)(a(501),a(614),null,null);e.exports=s.exports},501:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(77);t.default={name:"city",data:function(){return{backUrl:"//m.111.com.cn",ntkfKey:"yy_1000_1432121505109",saveFlag:!1,showCurrent:common.cookie("showCurrent")||null,medicalInfo:{userName:"",age:35,sex:0,tel:"",diseaseCase:[],introInfo:""}}},created:function(){this.$route.query.returnUrl&&(this.backUrl=decodeURIComponent(this.$route.query.returnUrl)),this.$route.query.ntkfKey&&(this.ntkfKey=decodeURIComponent(this.$route.query.ntkfKey)),0==this.showCurrent&&(window.location.href=this.backUrl)},mounted:function(){this.getAddressInfo(),this.getDiseaseList()},methods:{goBack:function(){this.$router.go(-1)},openNTKF:function(){this.shutMark(),window.timer=window.setInterval(function(){0==common.cookie("showCurrent")&&(clearInterval(window.timer),window.location.replace(common.cookie("returnUrl")))},2500),common.cookie("showCurrent",0);var e={key:"pharmacist",name:"药师咨询",params:{code:this.ntkfKey,type:"pharmacist",productId:""}};window.ywIM.open(e)},save:function(){if(""==this.medicalInfo.userName)return this.saveFlag=!1,common.msgShow("姓名不能为空"),!1;if(""==this.medicalInfo.age||this.medicalInfo.age<1||this.medicalInfo.age>150)return this.saveFlag=!1,common.msgShow("年龄只能是1~150之间"),!1;if(""==this.medicalInfo.sex)return this.saveFlag=!1,common.msgShow("请选择性别"),!1;if(""==this.medicalInfo.tel)return this.saveFlag=!1,common.msgShow("手机号不能为空"),!1;for(var e=0,t=0;t<this.medicalInfo.diseaseCase.length;t++)if(1==this.medicalInfo.diseaseCase[t].isChoose){e=1;break}if(""==this.medicalInfo.introInfo&&0==e)return this.saveFlag=!1,common.msgShow("请至少选择一个病症或填写病症描述"),!1;this.saveFlag=!0,this.submitFun()},cancle:function(){this.openNTKF()},setAge:function(e){/^[1-9]+[0-9]*$/.test(e.age)||(e.age=35)},setTel:function(e){/^1[3|4|5|7|8][0-9]{9}$/.test(e.tel)||common.msgShow("手机号格式不正确")},changeChoosed:function(e){0==e.isChoose?e.isChoose=1:e.isChoose=0},showPicker:function(){var e=this,t=["男","女"];this.$Picker({slots:[{type:"data",flex:1,values:t,textAlign:"center"}],onConfirm:function(t,a){var s=0;"男"==a.slot0?s=1:"女"==a.slot0&&(s=2),e.medicalInfo.sex=s,t.value=!1}})},getAddressInfo:function(){var e=this,t={};s.c.http({showLoad:!1,method:"post",urlPrefix:"dev",noNetwork:!1,url:"customer/consult/get_recipients_info",params:t,_timeout:1e4}).then(function(t){layer.closeAll();var a=t.body;0==a.rtn_code&&(a.data.realName&&(e.medicalInfo.userName=a.data.realName),a.data.mobile&&(e.medicalInfo.tel=a.data.mobile))},function(e){})},getDiseaseList:function(){var e=this,t={};s.c.http({showLoad:!1,method:"post",urlPrefix:"dev",noNetwork:!1,url:"customer/consult/get_disease_list",params:t,_timeout:1e4}).then(function(t){layer.closeAll();var a=t.body;0==a.rtn_code&&a.data.length>0&&(a.data.forEach(function(e){e.isChoose=0}),e.medicalInfo.diseaseCase=a.data)},function(e){})},submitFun:function(){var e=this,t={};t.userName=this.medicalInfo.userName,t.age=this.medicalInfo.age,t.sex=this.medicalInfo.sex,t.tel=this.medicalInfo.tel;var a=this.medicalInfo.diseaseCase,o=[];a.forEach(function(e){1==e.isChoose&&o.push(e.diseaseId)});var n=o.join(",");t.diseaseCase=n,s.c.http({showLoad:!1,method:"post",urlPrefix:"dev",noNetwork:!1,url:"customer/consult/add_consults",params:t,_timeout:1e4}).then(function(t){layer.closeAll(),0==t.body.rtn_code&&e.openNTKF()},function(e){})},shutMark:function(){var e={};s.c.http({showLoad:!1,method:"post",urlPrefix:"dev",noNetwork:!1,url:"customer/consult/skip_consult_healthy",params:e,_timeout:1e4}).then(function(e){layer.closeAll(),e.body.rtn_code},function(e){})}}}},536:function(e,t){},614:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"medical_page"},[a("div",{staticClass:"medical_header"},[a("span",{staticClass:"header_left_btn",on:{click:e.goBack}},[a("i",{staticClass:"icon iconfont icon_leftarrow"})]),e._v(" "),a("span",{staticClass:"header_title"},[e._v("电子药历")])]),e._v(" "),a("div",{staticClass:"medical_con"},[a("div",{staticClass:"warm_bar"},[e._v("为了更好的服务您，请填写以下信息：")]),e._v(" "),a("div",{staticClass:"medical_unit line_unit"},[a("span",{staticClass:"left_mark"},[e._v("姓名")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.medicalInfo.userName,expression:"medicalInfo.userName"}],staticClass:"input_box",attrs:{maxlength:"10",placeholder:"请输入您的姓名",type:"text"},domProps:{value:e._s(e.medicalInfo.userName)},on:{input:function(t){t.target.composing||(e.medicalInfo.userName=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"medical_unit line_unit"},[a("span",{staticClass:"left_mark"},[e._v("年龄")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.medicalInfo.age,expression:"medicalInfo.age"}],staticClass:"input_box",attrs:{maxlength:"3",type:"text"},domProps:{value:e._s(e.medicalInfo.age)},on:{blur:function(t){e.setAge(e.medicalInfo)},input:function(t){t.target.composing||(e.medicalInfo.age=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"medical_unit line_unit",on:{click:e.showPicker}},[a("span",{staticClass:"left_mark"},[e._v("性别")]),e._v(" "),1==e.medicalInfo.sex?a("span",{staticClass:"sex_span"},[e._v("男")]):e._e(),e._v(" "),2==e.medicalInfo.sex?a("span",{staticClass:"sex_span"},[e._v("女")]):e._e(),e._v(" "),0==e.medicalInfo.sex?a("input",{staticClass:"input_box",staticStyle:{background:"#fff"},attrs:{placeholder:"请选择您的性别",type:"text",disabled:"disabled"}}):e._e(),e._v(" "),a("i",{staticClass:"icon iconfont icon_rightarrow"})]),e._v(" "),a("div",{staticClass:"medical_unit line_unit"},[a("span",{staticClass:"left_mark"},[e._v("联系方式")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.medicalInfo.tel,expression:"medicalInfo.tel"}],staticClass:"input_box",attrs:{placeholder:"输入您的手机号码",maxlength:"11",type:"text"},domProps:{value:e._s(e.medicalInfo.tel)},on:{blur:function(t){e.setTel(e.medicalInfo)},input:function(t){t.target.composing||(e.medicalInfo.tel=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"medical_unit medical_key_part"},e._l(e.medicalInfo.diseaseCase,function(t){return a("span",{staticClass:"key_word",class:1==t.isChoose?"cur":"",on:{click:function(a){e.changeChoosed(t)}}},[e._v(e._s(t.diseaseName))])})),e._v(" "),a("div",{staticClass:"medical_unit area_part"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.medicalInfo.introInfo,expression:"medicalInfo.introInfo"}],staticClass:"area_box",attrs:{maxlength:"200",placeholder:"简单描述您的症状（选填）",name:"",rows:"",cols:""},domProps:{value:e._s(e.medicalInfo.introInfo)},on:{input:function(t){t.target.composing||(e.medicalInfo.introInfo=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"btn_part"},[a("span",{staticClass:"btn_unit next_btn",on:{click:e.save}},[e._v("下一步")]),e._v(" "),a("span",{staticClass:"btn_unit jump_btn",on:{click:e.cancle}},[e._v("跳 过")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=16.d03fa63f275ce3a08151.js.map