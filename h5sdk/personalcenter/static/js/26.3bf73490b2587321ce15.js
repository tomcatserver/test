webpackJsonp([26,32],{440:function(e,t,o){o(549);var i=o(119)(o(486),o(626),null,null);e.exports=i.exports},486:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(77);t.default={name:"changePhone",data:function(){return{telePhone:"",stepMobiCode:{title:"",imgCode:"",tips:"",mobiCode:"",sCodeSrc:"",sCodeIdentity:"",isGetCode:!1,disableGetCode:!0},countDown:60}},computed:{stepMobiCodeSrc:function(){return this.stepMobiCode.sCodeSrc?"data:image/jpg;base64,"+this.stepMobiCode.sCodeSrc:""}},created:function(){common.setPageTitle("1药网手机修改"),this.telePhone=this.$route.params.telePhone,this.stepMobiCode.title="已认证手机号："+this.changePhone(this.$route.params.telePhone),this.getImgCode()},methods:{goback:function(){common.isApp()?jsBridge.shutDown({},function(e){}):this.$router.back()},clearField:function(e){var t=this;switch(e){case 1:t.stepMobiCode.imgCode="";break;case 2:t.stepMobiCode.mobiCode=""}},countMobileCode:function(e){var t=this;if(console.log(e),0==this.countDown)return this.stepMobiCode.disableGetCode=!1,e.innerText="获取验证码",void(this.countDown=60);this.stepMobiCode.disableGetCode=!0,e.innerText=this.countDown+"s后重新发送",this.countDown--,setTimeout(function(){t.countMobileCode(e)},1e3)},onPicCodeInput:function(){this.stepMobiCode.isGetCode||(this.stepMobiCode.disableGetCode=!(this.stepMobiCode.imgCode.length>0))},changePhone:function(e){var t=e;return 11==e.length&&t&&(t=e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")),t},getImgCode:function(){var e=this,t={};this.requestNetUtil("get","dev","xpassport/getPicCode",t,function(t){var o=t;o&&(e.stepMobiCode.sCodeSrc=o.imgsrc,e.stepMobiCode.sCodeIdentity=o.identity)},function(e){console.log("failed net: "+e)})},getMobiCode:function(e){var t=this;if(this.stepMobiCode.tips="",this.stepMobiCode.imgCode.length<=0)return void(this.stepMobiCode.tips="请输入图片验证码");var o={identity:this.stepMobiCode.sCodeIdentity,code:this.stepMobiCode.imgCode,mobile:this.telePhone,type:3};this.requestNetUtil("post","dev","xpassport/sendSms",o,function(o){t.stepMobiCode.isGetCode=!0,t.stepMobiCode.disableGetCode=!0,t.stepMobiCode.title="已向绑定手机号"+t.changePhone(t.telePhone)+"发送短信",t.countMobileCode(e.target)},function(e){console.log("failed net: "+e)})},nextStep:function(){if(this.stepMobiCode.imgCode.length<=0)return void(this.stepMobiCode.tips="请输入图片验证码");if(this.stepMobiCode.mobiCode.length<=0)return void(this.stepMobiCode.tips="请输入手机验证码");var e=this,t={smscode:this.stepMobiCode.mobiCode,mobile:this.telePhone};this.requestNetUtil("post","dev","xpassport/validatePhoneCode",t,function(t){e.$router.push({path:"/changePhoneNew"})},function(e){console.log("failed net: "+e)})},requestNetUtil:function(e,t,o,s,n,d){var a=this;i.c.http({showLoad:!0,method:e,urlPrefix:t,url:o,params:s,_timeout:1e4}).then(function(e){console.info("rtn_111: "+e.body.rtn_ext),console.info("datas: "+e.body.data);var t=a;"0"===e.body.rtn_code?n&&n(e.body.data):1*e.body.rtn_code==2?common.isApp()?jsBridge.toNativedetail({topage:"login"},function(e){}):window.location.href="//m.111.com.cn/yyw/wap/login/#/?returnUrl="+encodeURIComponent("//m.111.com.cn/yyw/wap/personalcenter/#/accountCenter"):("xpassport/getPicCode"==o?common.msgShow("抱歉，请求失败，请稍候重试"):(t.stepMobiCode.isGetCode=!1,t.stepMobiCode.disableGetCode=!1,t.stepMobiCode.mobiCode="",t.stepMobiCode.imgCode="",t.stepMobiCode.tips=e.body.rtn_tip),t.getImgCode())},function(e){"xpassport/getPicCode"==o?common.msgShow("抱歉，请求失败，请稍候重试"):common.msgShow("网络开小差了，请稍候重试"),d&&d(e)})}}}},549:function(e,t){},626:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main"},[o("div",{staticStyle:{position:"fixed",width:"100%",background:"#fff",height:"100%","z-index":"0"}}),e._v(" "),o("header",{staticClass:"bar bar_nav"},[o("a",{staticClass:"top_icon icon_back fl",attrs:{href:"javascript:;"},on:{click:e.goback}},[o("i",{staticClass:"icon iconfont icon_leftarrow"})]),e._v(" "),o("div",{staticClass:"top_title"},[e._v("手机修改")])]),e._v(" "),o("div",{staticClass:"content login_page"},[o("div",{staticClass:"item_top t_l"},[o("span",[e._v(e._s(e.stepMobiCode.title))])]),e._v(" "),o("div",{staticClass:"item_control"},[o("input",{directives:[{name:"model",rawName:"v-model:value",value:e.stepMobiCode.imgCode,expression:"stepMobiCode.imgCode",arg:"value"}],staticClass:"item_input img_code",attrs:{type:"text",placeholder:"图片验证码",autocomplete:"off",maxlength:"4"},domProps:{value:e._s(e.stepMobiCode.imgCode)},on:{keyup:e.onPicCodeInput,input:function(t){t.target.composing||(e.stepMobiCode.imgCode=t.target.value)}}}),e._v(" "),e.stepMobiCode.imgCode.length>0?o("i",{staticClass:"icon_clear",staticStyle:{display:"block"},on:{click:function(t){e.clearField(1)}}}):e._e(),e._v(" "),o("div",{staticClass:"code_box code_text",on:{click:e.getImgCode}},[o("img",{attrs:{src:e.stepMobiCodeSrc}}),e._v(" "),o("div",{staticClass:"change_code"},[e._v("换一张")])])]),e._v(" "),o("div",{staticClass:"item_control"},[o("input",{directives:[{name:"model",rawName:"v-model:value",value:e.stepMobiCode.mobiCode,expression:"stepMobiCode.mobiCode",arg:"value"}],staticClass:"item_input img_code",attrs:{type:"text",maxlength:"6",placeholder:"手机验证码",autocomplete:"off",onblur:""},domProps:{value:e._s(e.stepMobiCode.mobiCode)},on:{input:function(t){t.target.composing||(e.stepMobiCode.mobiCode=t.target.value)}}}),e._v(" "),e.stepMobiCode.mobiCode.length>0?o("i",{staticClass:"icon_clear",staticStyle:{display:"block"},on:{click:function(t){e.clearField(2)}}}):e._e(),e._v(" "),o("button",{staticClass:"btn_code",attrs:{disabled:e.stepMobiCode.disableGetCode},on:{click:e.getMobiCode}},[e._v("获取验证码")])]),e._v(" "),o("div",{staticClass:"item_tips"},[o("p",[e._v(e._s(e.stepMobiCode.tips))])]),e._v(" "),o("button",{staticClass:"btn_default btn_red btn_block mt20",attrs:{id:"btn_submit"},on:{click:e.nextStep}},[e._v("下一步")])])])},staticRenderFns:[]}}});
//# sourceMappingURL=26.3bf73490b2587321ce15.js.map