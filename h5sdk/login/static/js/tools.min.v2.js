!function(window){"use strict";var callBackList=[],baseConfig_scheme="gl://",baseConfig_debuger=!0;function versionCode(){if(isApp()){var _u;return 0<(_u="ios"==(u=navigator.userAgent,isAndroid=-1<u.indexOf("android"),isWap=(u.indexOf("iphone"),!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)),isApp()?isAndroid?"android":"ios":isWap?"wap":"offical")?navigator.userAgent.split("@")[2]:navigator.userAgent.split("@")[3].split(" ")[0]).indexOf("v")||1*_u==NaN?"523":_u}return 0;var u,isAndroid,isWap}function postUrl(strUrl,param,callid){if(isApp()||navigator.userAgent.match(/app_yzHealth/i)){var c=document.createElement("div");c.innerHTML='<iframe style="display: none;" src="'+baseConfig_scheme+strUrl+"?callid="+callid+"&param="+encodeURIComponent(JSON.stringify(param))+'"/>';document.querySelector("body").appendChild(c);setTimeout(function(){document.querySelector("body").removeChild(c)},3e3)}}function jsb(target,option,param,cf,f1){var callid=callBackList.length;"function"!=typeof option?param=mergeObjs(param,option):"function"==typeof option&&(cf=option);cf=cf||new Function;if("setupNavigation"==target){callbackListFunction(param.left.callid,f1);Array.isArray(param.right)?param.right.forEach(function(_item){callbackListFunction(_item.callid,_item.cb||function(){})}):callbackListFunction(param.right.callid,param.right.cb||function(){})}if(!navigator.userAgent.match(/Android/i))callbackListFunction(callid,cf);else switch(target){case"getAppCookie":callbackListFunction(callid,cf(JSON.parse(Browser.getAppCookie())));break;case"updateAppStorage":callbackListFunction(callid,cf(JSON.parse(Browser.updateAppStorage(JSON.stringify(param)))));break;case"queryAppStorage":callbackListFunction(callid,cf(JSON.parse(Browser.queryAppStorage(JSON.stringify(param)))));break;case"removeAllAppStorage":callbackListFunction(callid,cf(JSON.parse(Browser.removeAllAppStorage())));break;case"hideTabbar":return;default:callbackListFunction(callid,cf)}!function(name,param){if(baseConfig_debuger){console.log("调用的方法是---\x3e"+name);console.log("调用的参数是 ---\x3e"+JSON.stringify(param))}}(target,param);postUrl(target,param,callid)}function toNativedetail(option,cf){jsb("forward",option,{topage:"product",animation:0,fixPage:!1,params:{}},cf)}function hideNavigation(option,cf){jsb("hideNavigation",option,{isHide:!0},cf)}var mergeObjs=function(def,obj){if(!obj)return def;if(!def)return obj;for(var i in obj)if(null!=obj[i]&&obj[i].constructor==Object)def[i]=mergeObjs(def[i],obj[i]);else if(null!=obj[i]&&obj[i]instanceof Array&&0<obj[i].length)if(obj[i][0].constructor==Object){for(var newobjs=[],objids={},x=0,l=def[i].length;x<l;x++)objids[def[i][x].id]=x;for(x=0,l=obj[i].length;x<l;x++){var newobj=obj[i][x];void 0!==objids[newobj.id]?def[i][x]=mergeObjs(def[i][x],newobj):newobjs.push(newobj)}for(x=0,l=newobjs.length;x<l;x++)def[i].push(newobjs[x])}else for(x=0;x<obj[i].length;x++){var idxObj=obj[i][x];-1===def[i].indexOf(idxObj)&&def[i].push(idxObj)}else def[i]=obj[i];return def};function callbackListFunction(callid,cf){callBackList[callid]=cf||new Function}function isApp(){return-1<navigator.userAgent.indexOf("app_yiwang")}var jsBridge={callback:function(result){var res="";res=navigator.userAgent.match(/Android/i)?JSON.parse(result):result;var callback=callBackList[1*res.callid];"function"==typeof callback&&callback(res)},toast:function(option,cf){jsb("toast",option,{toast:""},cf)},share:function(option,cf){var types=option.shareTypes&&option.shareTypes.length?[]:["wxfriend","qqfriend","weibo"];jsb("share",option,{title:"1药网",content:"1药网",imgUrl:"https://m.111.com.cn/maps/images/common/logo1.png",shareUrl:"https://m.111.com.cn",shareTypes:types},cf)},toProductlist:function(option,cf){var param={topage:"productlist",params:{listType:option.listType||"",keyword:option.keyword||"",categoryId:option.categoryId||"",categoryName:option.categoryName||"",couponBatchCode:option.couponBatchCode||""}};toNativedetail(param,cf)},toNativedetail:toNativedetail,openWebView:function(option,cf){jsb("forward",option,{topage:"webview",animation:0,fixPage:!1,finishself:0,params:{url:"",backward:!1}},cf)},back:function(option,cf){jsb("back",option,{animation:0},cf)},shutDown:function(option,cf){jsb("shutDown",option,{animation:0},cf)},isLogin:function(option,cf){jsb("isLogin",option,{},cf)},getNetworkStatus:function(option,cf){jsb("getNetworkStatus",option,{},cf)},getUserInfo:function(option,cf){jsb("getUserInfo",option,{},cf)},getLocationInfo:function(option,cf){jsb("getLocationInfo",option,{},cf)},getAppInfo:function(option,cf){jsb("getAppInfo",option,{},cf)},getAppRefer:function(option,cf){562<versionCode()&&jsb("getReferPageCode",option,{},cf)},getWeChatOpenId:function(option,cf){jsb("getWeChatOpenId",option,{},cf)},getPushNotificationStatus:function(option,cf){jsb("getPushNotificationStatus",option,{},cf)},openNotification:function(option,cf){jsb("openNotification",option,{},cf)},wxPay:function(option,cf){jsb("wxPay",option,{sign:"8CFB1928B3098513CA917205359D792D",timestamp:"1488350950",noncestr:"1hl3lw1k1cC7jGAw",partnerid:"1221847901",prepayid:"wx20170301144909d8287b83680576459167",package:"Sign=WXPay"},cf)},aliPay:function(option,cf){jsb("aliPay",option,{orderInfo:'partner="2088501903418573"&seller_id="etao@111.com.cn"&out_trade_no="20170301164415605369"&subject="1药网订单"&body="待结算"&total_fee="29.0"&notify_url="http://114.80.125.5:8181/payment/alipay/appTradeNotifyTwo.action"&service="mobile.securitypay.pay"&_input_charset="utf-8"&payment_type="1"&sign_type="RSA"&sign="fXl0L5Oa6AuUixi138%2F4qWBcBGPU4IAZT6T95x6jjfkwgUh5IsBYIJhjhrnAn2bZQlolA470oZMPYkB0D1gdIXtAg8cGQcBJplvE%2FpUbB%2B2xd8QYuM2w%2Fa2ljVV%2FW1RX3NOmm838%2FjkgNk2Dkl%2FANCTTPzGJBOagh4ESQWuPMAo%3D"'},cf)},linkPay:function(option,cf){jsb("linkPay",option,{orderInfo:'{"busi_partner":"101001","dt_order":"20170303105801","money_order":"0.01","no_order":"20170303105753974138","notify_url":"http://114.80.125.5:8181/payment/lianlian/tradeNotifyUrl.action","oid_partner":"201408071000001546","risk_item":"{\\"delivery_cycle\\":\\"other\\",\\"frms_ware_category\\":\\"4006\\",\\"logistics_mode\\":\\"2\\",\\"user_info_mercht_userno\\":147281734}","sign":"76395a6b69c8b00ed8f10a98ddd50fa5","sign_type":"MD5","user_id":"147281734"}'},cf)},yiQianBaoPay:function(option,cf){jsb("yiQianBaoPay",option,{orderInfo:'{"cashierType":"0","protocolInfo":{"orderId":"1703010000460645"},"resultDisplayLevel":"N"}'},cf)},upPay:function(option,cf){jsb("upPay",option,{orderInfo:""},cf)},upAPay:function(option,cf){jsb("upAPay",option,{orderInfo:""},cf)},androidPay:function(option,cf){jsb("upMobilePay",option,{orderInfo:"",type:""},cf)},bestPay:function(option,cf){jsb("bestPay",option,{orderInfo:"SERVICE=mobile.security.pay&MERCHANTID=02440103010150900&MERCHANTPWD=768231&SUBMERCHANTID=&BACKMERCHANTURL=http://114.80.125.5:8181/payment/yizhifu/appTradeNotifyYiZhiFu.action&ORDERSEQ=20170301164415605369&ORDERREQTRANSEQ=20170301164415605369&ORDERTIME=20170301164416&ORDERVALIDITYTIME=&CURTYPE=RMB&ORDERAMOUNT=29.0&SUBJECT=纯支付&PRODUCTID=04&PRODUCTDESC=APP翼支付&CUSTOMERID=20170301164415605369&SWTICHACC=false&SIGN=EDE379054221B625D9A6C772955EEE8D&PRODUCTAMOUNT=29.0&ATTACHAMOUNT=0.00&ATTACH=77&ACCOUNTID=&USERIP=10.6.30.85&BUSITYPE=04&EXTERNTOKEN=NO&SIGNTYPE=MD5"},cf)},pickImage:function(option,cf){jsb("pickImage",option,{pickType:0,allowEdit:0,uploadUrl:"https://eaifjfe.com",extraParams:{}},cf)},forbidPanBack:function(option,cf){jsb("forbidPanBack",option,{forbidPanBack:!0},cf)},networkReq:function(option,cf){jsb("networkReq",option,{requestUrl:"https://mobi.fangkuaiyi.com",param:{content:"东西用的不错",title:"还会再买"}},cf)},hideNavigation:hideNavigation,setupNavigation:function(option,cf,f1){jsb("setupNavigation",option,{left:{hasBack:!0,hasShutdown:!0,callid:9999},isShow:!1,middle:{title:""},right:[{menuType:0,imgUrl:"",buttonName:"",callid:9998,cb:function(){}}]},cf,f1)},setStatusBarColor:function(option,cf){jsb("setStatusBarColor",option,{isLight:!0,backgroundColor:""},cf)},getHistoryData:function(option,cf){jsb("getHistoryData",option,{},cf)},isIosReview:function(option,cf){jsb("isIosReview",option,{},cf)},goPay:function(option,cf){jsb("forward",option,{topage:"bank",animation:0,fixPage:!1,params:{paymentId:"AE233",isPOSOK:!0,isYiKaTongOK:!0,isHuoDaoFuKuanOK:!0,orderID:"883738733",userCoin:"0"}},cf)},getAppCookie:function(option,cf){jsb("getAppCookie",option,{},cf)},scanning:function(option,cf){jsb("scanning",option,{},cf)},appCopy:function(option,cf){jsb("pasteBoard",option,{content:"1药网"},cf)},savePhotoInAndroid:function(option,cf){jsb("savePhoto",option,{},cf)},setProvince:function(option,cf){jsb("setProvince",option,{provinceName:"上海"},cf)},synCartNumStatus:function(option,cf){jsb("synCartNumStatus",option,{cartnum:0},cf)},synDemandNumStatus:function(option,cf){jsb("synDemandNumStatus",option,{demandnum:0},cf)},autoLogin:function(option,cf){jsb("autoLogin",option,{},cf)},updateAppCookie:function(option,cf){jsb("updateCookieInfo",option,{},cf)},updateAppStorage:function(option,cf){jsb("updateAppStorage",option,{key:"",value:"",isPersistence:!1},cf)},queryAppStorage:function(option,cf){jsb("queryAppStorage",option,{key:""},cf)},removeAllAppStorage:function(option,cf){jsb("removeAllAppStorage",option,{},cf)},hideTabbar:function(option,cf){jsb("hideTabbar",option,{hide:!0},cf)},hideLoading:function(option,cf){jsb("hideLoading",option,{},cf)},openChat:function(option,cf){if("523"<versionCode()){jsb("openChat",option,{finishself:0},cf)}else NTKF&&NTKF.im_openInPageChat(option.xnId)},init:function(){isApp()&&!window.showAppNavigation&&hideNavigation()},updateLoginToken:function(option,cf){jsb("updateLoginToken",option,{token:"",glToken:""},cf)},updateLoginInfo:function(option,cf){if(isApp()&&"604"<=versionCode()){jsb("updateLoginInfo",option,{loginMobile:""},cf)}else console.log("no support under version 604 ")},call4Phone:function(option,cf){if(isApp()&&-1<navigator.userAgent.indexOf("android")&&versionCode()<="583")try{option.tel=option.phoneNumber;delete option.phoneNumber}catch(e){console.log(e);cf&&cf({errcode:1,errmsg:"something error"});return}jsb("tel",option,{},cf)},getMobilePay:function(option,cf){jsb("getMobilePayStatus",option,{},cf)},launchWXpro:function(option,cf){jsb("launchMiniProgram",option,{userName:"",miniprogramType:0,path:""},cf)},openWechat:function(option,cf){jsb("openWeixin",option,{},cf)},hasInstalledYWApp:function(option,cf){jsb("thirdAppInfo",option,{packageName:"com.yiwang"},cf)},openMarket:function(option,cf){jsb("openMarket",option,{packageName:"com.yiwang"},cf)}};jsBridge.init();window.callback=function(o){jsBridge.callback(o)};"function"==typeof define&&define.amd?define(jsBridge):window.jsBridge=jsBridge}(window);!function(a){"use strict";function e(a){return b.querySelectorAll(a)}function j(a){this.config=g.extend(a),this.view()}var b=document,d="getElementsByClassName",f={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},g={extend:function(a){var b=JSON.parse(JSON.stringify(f));for(var c in a)b[c]=a[c];return b},timer:{},end:{},touch:function(a,b){a.addEventListener("click",function(a){b.call(this,a)},!1)}},h=0,i=["layui-m-layer"];j.prototype.view=function(){var a=this,c=a.config,f=b.createElement("div");a.id=f.id=i[0]+h,f.setAttribute("class",i[0]+" "+i[0]+(c.type||0)),f.setAttribute("index",h);var g=function(){var a="object"==typeof c.title;return c.title?'<h3 style="'+(a?c.title[1]:"")+'">'+(a?c.title[0]:c.title)+"</h3>":""}(),j=function(){"string"==typeof c.btn&&(c.btn=[c.btn]);var a,b=(c.btn||[]).length;return 0!==b&&c.btn?(a='<span yes type="1">'+c.btn[0]+"</span>",2===b&&(a='<span no type="0">'+c.btn[1]+"</span>"+a),'<div class="layui-m-layerbtn">'+a+"</div>"):""}();if(c.fixed||(c.top=c.hasOwnProperty("top")?c.top:100,c.style=c.style||"",c.style+=" top:"+(b.body.scrollTop+c.top)+"px"),2===c.type&&(c.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(c.content||"")+"</p>"),c.skin&&(c.anim="up"),"msg"===c.skin&&(c.shade=!1),f.innerHTML=(c.shade?"<div "+("string"==typeof c.shade?'style="'+c.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(c.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(c.skin?"layui-m-layer-"+c.skin+" ":"")+(c.className?c.className:"")+" "+(c.anim?"layui-m-anim-"+c.anim:"")+'" '+(c.style?'style="'+c.style+'"':"")+">"+g+'<div class="layui-m-layercont">'+c.content+"</div>"+j+"</div></div></div>",!c.type||2===c.type){var k=b[d](i[0]+c.type);1<=k.length&&layer.close(k[0].getAttribute("index"))}document.body.appendChild(f);var m=a.elem=e("#"+a.id)[0];c.success&&c.success(m),a.index=h++,a.action(c,m)},j.prototype.action=function(a,b){var c=this;a.time&&(g.timer[c.index]=setTimeout(function(){layer.close(c.index)},1e3*a.time));function e(){0==this.getAttribute("type")?(a.no&&a.no(),layer.close(c.index)):a.yes?a.yes(c.index):layer.close(c.index)}if(a.btn)for(var f=b[d]("layui-m-layerbtn")[0].children,h=f.length,i=0;i<h;i++)g.touch(f[i],e);if(a.shade&&a.shadeClose){var j=b[d]("layui-m-layershade")[0];g.touch(j,function(){layer.close(c.index,a.end)})}a.end&&(g.end[c.index]=a.end)},a.layer={v:"2.0",index:h,open:function(a){return new j(a||{}).index},close:function(a){var c=e("#"+i[0]+a)[0];c&&(c.innerHTML="",b.body.removeChild(c),clearTimeout(g.timer[a]),delete g.timer[a],"function"==typeof g.end[a]&&g.end[a](),delete g.end[a])},closeAll:function(){for(var a=b[d](i[0]),c=0,e=a.length;c<e;c++)layer.close(0|a[0].getAttribute("index"))}},"function"==typeof define?define(function(){return layer}):function(){var a=document.scripts,c=a[a.length-1],d=c.src;d.substring(0,d.lastIndexOf("/")+1);c.getAttribute("merge")}()}(window);!function(window){var customization={MCommon_001:0,MCommon_002:0,MProductDetail_003:0,MProductDetail_004:0,MProductDetail_005:0,MProductDetail_006:0,MProductDetail_007:0,MProductDetail_008:0,MProductDetail_009:0,MPhoneNumberBinding_010:0,MPhoneNumberBinding_010_txt:"",MPhoneNumberBinding_011:0,MPhoneNumberBinding_011_txt:"",MPhoneNumberBinding_012:0,MPhoneNumberBinding_012_txt:"",MShoppingCart_013:0,MShoppingCart_014:0,MShoppingCart_015:0,MShoppingCart_016:0,MShoppingCart_017:0,MShoppingCart_018:0,MShoppingCart_018_txt:"",MOrderConfirmation_019:0,MorderDetail_020:0,MProductDetail_021:0,MOrderConfirmation_022:0,MorderDetail_023:0,Common_024:0,Common_025:0,Common_026:0,SPShoppingCart_027:0,SPCommon_028:0,SPProductDetail_029:0,SPProductDetail_030:0,SPShoppingCart_031:0,SPShoppingCart_032:0,SPCommon_033:0,SPSearchResultList_034:0,MorderDetail_035:0,MProductDetail_036:0,MorderDetail_037:0,MShoppingCart_038:0,Common_039:0,Mmycenter_040:0,Common_041:0,MProductDetail_042:0,MProductDetail_043:0,channelId:"",channelName:""},appTrackerList={home:"MZHQAPPYL001",product:"MZHQAPPYL002"},common={init:function(){if(!common.isApp()){common.showTracelessPop();common.unionLogin()}},getAjaxRequestCommonParams:function(platform){var params={h5:{tradername:"yw_app",trader:"h5",closesignature:"yes",signature_method:"md5",timestamp:(new Date).getTime(),signature:"****"},android:{},ios:{}};return params[platform]?params[platform]:null},objectToUrlQueryString:function(objectParams){var queryStringArr=[];for(var key in objectParams)queryStringArr.push(key+"="+encodeURIComponent(objectParams[key]));return 0<queryStringArr.length?queryStringArr.join("&"):""},getUrlParams:function(name,url){var result=(url=url||window.location.href).match(new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i"));return null!=result?decodeURIComponent(result[2]):null},getUrlVars:function(name){for(var hash,vars=[],hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=hash[1]}return vars[name]},getCustomization:function(callback){var customizedChannelId=this.getUrlParams("customizedChannelId")||this.getParam("customizedChannelId")||this.getUrlVars("customizedChannelId"),localCustomization=common.localStorage.getItem("customization"),refer=window.document.referrer;window.customization=customization;if(customizedChannelId){var ajaxFlag=!1;ajaxFlag||common.Ajax({url:protocol+"//gateway.fangkuaiyi.com/coupon/customized/purchaseMedicineSwitch?"+common.objectToUrlQueryString(common.getAjaxRequestCommonParams("h5")),data:{channel_name:customizedChannelId},timeOut:2500,type:"get",before:function(){ajaxFlag=!0},error:function(status,statusText){var opt={logCode:"YYWE00060",reportTitle:"ajaxError",reportInfo:{message:"ajax error:"+statusText,fileName:window.location.href}};ajaxFlag=!1;"function"==typeof callback&&callback();if(0<=statusText.indexOf("timeout")){opt.reportTitle="ajaxTimeout";opt.reportInfo.message="ajax timeout"}common.submitError(opt)},success:function(res){ajaxFlag=!1;"string"==typeof res&&(res=JSON.parse(res));if("0"==res.rtn_code)try{window.customization=Object.assign({},customization,res.data);common.localStorage.setItem("customization",window.customization)}catch(e){console.log(e)}else common.msgShow(res.rtn_msg);"function"==typeof callback&&callback()}})}else{refer?0<refer.indexOf("m.111.com.cn")&&localCustomization&&"{}"!=JSON.stringify(localCustomization)&&(window.customization=localCustomization):common.localStorage.removeItem("customization");"function"==typeof callback&&callback()}},fetchJsConfig:function(shareInfo,wxConfig){var jsApiList=["checkJsApi","onMenuShareTimeline","updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onVoiceRecordEnd","playVoice","onVoicePlayEnd","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"];common.Ajax({url:"https://gateway.fangkuaiyi.com/xpassport/getJsConfig?"+common.objectToUrlQueryString(common.getAjaxRequestCommonParams("h5")),data:{url:window.location.href.split("#")[0]},type:"get",success:function(res){if(0==(res=JSON.parse(res)).rtn_code){wx.config({debug:wxConfig&&wxConfig.debug||!1,jsApiList:wxConfig&&wxConfig.jsApiList||jsApiList,timestamp:res.data.timestamp,appId:res.data.appId,nonceStr:res.data.nonceStr,signature:res.data.signature,jsapi_ticket:res.data.jsapi_ticket,url:res.data.url});wx.ready(function(){common.wxShare(shareInfo)})}},error:function(status,statusText){}})},wxShare:function(shareInfo,callback){var cf={title:"手机买药，上1药网，品种齐全，送药上门",content:"1药网，网上药店，全国正规合法线上药房，在线购买药品送药到家",shareUrl:window.location.href,imgUrl:"https://s.maiyaole.com/images/yyw_logo.jpg"};if(shareInfo){shareInfo.title=shareInfo.title||cf.title;shareInfo.content=shareInfo.content||cf.content;shareInfo.shareUrl=shareInfo.shareUrl||cf.shareUrl;shareInfo.imgUrl=shareInfo.imgUrl||cf.imgUrl}else shareInfo=cf;wx.updateAppMessageShareData({title:shareInfo.title,desc:shareInfo.content,link:shareInfo.shareUrl,imgUrl:shareInfo.imgUrl,success:function(){callback&&"function"==typeof callback&&callback()},cancel:function(){}});wx.updateTimelineShareData({title:shareInfo.title,link:shareInfo.shareUrl,imgUrl:shareInfo.imgUrl,success:function(){callback&&"function"==typeof callback&&callback()},cancel:function(){}});wx.onMenuShareWeibo({title:shareInfo.title,desc:shareInfo.content,link:shareInfo.shareUrl,imgUrl:shareInfo.imgUrl,success:function(){callback&&"function"==typeof callback&&callback()},cancel:function(){}});wx.onMenuShareQZone({title:shareInfo.title,desc:shareInfo.content,link:shareInfo.shareUrl,imgUrl:shareInfo.imgUrl,success:function(){callback&&"function"==typeof callback&&callback()},cancel:function(){}})},jumpToApp:function(params){if(!common.isApp()&&1!=common.cookie("hideAdv")){var defaultParams={page:"home",isDownload:!1};if(params)for(var key in defaultParams)params[key]=params[key]||defaultParams[key];else params=defaultParams;var downloadTimer,isIOS=common.iOS(),isWx=common.inWechat(),downloadHref="https://m.111.com.cn/yyw/app/download/index.html?isAutoDownload=true",appTracker=common.cookie("tracker_u")||appTrackerList[params.page],src="yyw://home";document.addEventListener("visibilitychange",function(){document.hidden&&clearTimeout(downloadTimer)});window.addEventListener("pagehide",function(){clearTimeout(downloadTimer)});document.addEventListener("webkitvisibilitychange",function(){document.webkitHidden&&clearTimeout(downloadTimer)});switch(params.page){case"newlogin":src="yyw://"+params.page+"?tracker_u="+appTracker;break;case"product":src="yyw://"+params.page+"?productId="+params.productId+"&tracker_u="+appTracker;break;case"coupon":case"cart":src="yyw://"+params.page+"?tracker_u="+appTracker;break;case"home":default:src="yyw://home?tracker_u="+appTracker}isWx?params.isDownload&&(window.location.href=downloadHref):window.addEventListener&&window.addEventListener("load",function(){var iframe=document.createElement("iframe");iframe.style.display="none";iframe.src=src;var startTime=(new Date).getTime();if(isIOS){window.location.href=src;downloadTimer=setTimeout(function(){params.isDownload&&(window.location.href=downloadHref)},2500)}else{document.querySelector("body").appendChild(iframe);setTimeout(function(){(new Date).getTime()-startTime<2e3&&(iframe.src="yaowang://main")},1500);downloadTimer=setTimeout(function(){params.isDownload&&(window.location.href=downloadHref)},2500)}})}},autumn:function(){var u=navigator.userAgent,isAndroid=-1<u.indexOf("android"),isWap=(u.indexOf("iphone"),!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/));return common.isApp()?isAndroid?"android":"ios":isWap?"wap":"offical"},versionCode:function(){if(common.isApp()){var _u;return 0<(_u="ios"==common.autumn()?navigator.userAgent.split("@")[2]:navigator.userAgent.split("@")[3].split(" ")[0]).indexOf("v")||1*_u==NaN?"523":_u}return 0},submitError:function(opt){var data=null;(data=opt.isOffline?opt:{logCode:opt&&opt.logCode||"YYWE00006",tradername:"yw_app",trader:"h5",token:common.cookie("gltoken")||"",platform:3,closesignature:"yes",signature_method:"md5",timestamp:(new Date).getTime(),signature:"****",deviceCode:common.cookie("UUID")||common.getUUID(),nettype:"",operator:"",provinceId:common.cookie("provinceId")||1,provinceName:common.cookie("provinceName")||"上海",phoneType:common.isApp()?common.iOS()?"iOS":"android":"H5",pageInfo:opt&&opt.pageInfo||window.location.href,clientVersion:common.versionCode(),clientSystem:navigator.userAgent,reportTitle:opt&&opt.reportTitle||"",reportTime:(new Date).getTime(),reportInfo:JSON.stringify(opt&&opt.reportInfo||{}),logType:opt&&opt.logType||"error"})&&common.Ajax({url:protocol+"//gateway.fangkuaiyi.com/promotion/appLog/addAppLogInfo",data:data,type:"post",success:function(res){if("0"==JSON.parse(res).rtn_code)if(data.isOffline)try{var offlineErrorLogs=common.localStorage.getItem("offlineErrorLogs")||[];"string"==typeof offlineErrorLogs&&(offlineErrorLogs=JSON.parse(offlineErrorLogs));if(0<offlineErrorLogs.length){offlineErrorLogs.splice(0,1);common.localStorage.setItem("offlineErrorLogs",JSON.stringify(offlineErrorLogs));common.sendOfflineErrorLog()}}catch(e){}else opt&&opt.callback&&opt.callback()},error:function(){if(!data.isOffline){try{data.isOffline=!0;var offlineErrorLogs=common.localStorage.getItem("offlineErrorLogs")||[];"string"==typeof offlineErrorLogs&&(offlineErrorLogs=JSON.parse(offlineErrorLogs));5<=offlineErrorLogs.length&&offlineErrorLogs.splice(0,1);offlineErrorLogs.push(data);common.localStorage.setItem("offlineErrorLogs",JSON.stringify(offlineErrorLogs))}catch(e){}opt&&opt.callback&&opt.callback()}}})},sendOfflineErrorLog:function(){var offlineErrorLogs=common.localStorage.getItem("offlineErrorLogs")||[];if(0<offlineErrorLogs.length){var errorLogItem=offlineErrorLogs[0];errorLogItem&&errorLogItem.isOffline&&common.submitError(errorLogItem)}},getABTest:function(opt){var ajaxFlag=!1,appCookie=common.localStorage.getItem("appCookie"),deviceCode="",platform="",tradername="",trader="";if(common.isApp()){if(common.isAndroid()){deviceCode=appCookie&&appCookie.deviceId?appCookie.deviceId:"";platform=1;tradername="mobile_android";trader="androidphone"}if(common.iOS()){deviceCode=appCookie&&appCookie.deviceId?appCookie.deviceId:"";platform=2;tradername="mobile_ios";trader="iphone"}}else{deviceCode=common.cookie("UUID")||common.getUUID();platform=3;tradername="yw_app";trader="h5"}var url=protocol+"//gateway.fangkuaiyi.com/mobile/grayexpriment/getGrayExpCode",data={tradername:tradername,trader:trader,platform:platform,closesignature:"yes",signature_method:"md5",timestamp:(new Date).getTime(),signature:"****",interfaceVersion:opt.interfaceVersion||1,provinceId:common.cookie("provinceId")||1,provinceName:common.cookie("provinceName")||"上海",locatecityname:common.cookie("locateCityName"),locateprovinceid:common.cookie("locateProvinceId")||1,deviceCode:deviceCode,expCodeList:JSON.stringify(opt.expCodeList)};if(opt.expCodeList&&!ajaxFlag){ajaxFlag=!0;common.Ajax({url:url,data:data,timeOut:2500,type:"post",success:function(res){var successData,r=JSON.parse(res);if(r&&"0"==r.rtn_code)if(r.data&&1==data.interfaceVersion){for(var i=0;i<opt.expCodeList.length;i++){var grayKey=opt.expCodeList[i];r.data[grayKey]?common.isApp()?appCookie[grayKey]=r.data[grayKey].grayRule:common.cookie(grayKey,r.data[grayKey].grayRule,1/288):common.isApp()?appCookie[grayKey]="":common.cookie(grayKey,"",1)}common.isApp()&&common.localStorage.setItem("appCookie",appCookie)}else if(r.data&&2==opt.interfaceVersion){var AbTestSwitch=r.data.AbTestSwitch||[],AbTestSwitchCode=[];common.cookie("AbTestSwitchCode")&&(AbTestSwitchCode=common.cookie("AbTestSwitchCode").split(","));r.data.AbTest&&0<r.data.AbTest.length&&common.cookie("AbTestCode",r.data.AbTest[0].abid,1/288);if(AbTestSwitch&&1<=AbTestSwitch.length){for(i=0;i<AbTestSwitch.length;i++){if(grayKey=AbTestSwitch[i].name){if(common.isApp()){var obj={};appCookie[grayKey]=AbTestSwitch[i].grayRule;obj[grayKey]=AbTestSwitch[i].grayRule;jsBridge.updateAppCookie(obj,function(res){})}else common.cookie(grayKey,AbTestSwitch[i].grayRule,1/288);AbTestSwitchCode.indexOf(grayKey)<0&&AbTestSwitchCode.push(grayKey)}else common.isApp()?appCookie[grayKey]="":common.cookie(grayKey,"",1)}common.isApp()?common.localStorage.setItem("appCookie",appCookie):common.cookie("AbTestSwitchCode",AbTestSwitchCode,1)}successData=r.data.AbTest.concat(r.data.AbTestPublish,r.data.AbTestSwitch);r.data=successData}else handleABTest4Error();else handleABTest4Error();opt.callback&&opt.callback(r);ajaxFlag=!1},error:function(status,statusText){0<=opt.expCodeList.indexOf("EXP_IM_1")&&common.cookie("EXP_IM_1","GRAY_RULE_1",1/288);handleABTest4Error(0,statusText);ajaxFlag=!1;opt.callback&&opt.callback()}})}function handleABTest4Error(status,statusText){for(var i=0;i<opt.expCodeList.length;i++){var grayKey=opt.expCodeList[i];common.isApp()?appCookie[grayKey]="":common.cookie(grayKey,"",1)}common.isApp()&&common.localStorage.setItem("appCookie",appCookie);try{var option={logCode:"YYWE00001",reportTitle:statusText&&0<statusText.indexOf("timeout")?"ajaxTimeout":"ajaxError",reportInfo:{fileName:window.location.href,errorType:"ajaxError",requestData:data.expCodeList}}}catch(e){console.log(e)}common.submitError(option)}},getUserBaseInfo:function(gltoken){if(!(gltoken=gltoken||common.cookie("gltoken")))return!1;var url=protocol+"//gateway.fangkuaiyi.com/customer/userCenter/baseInfo",data={tradername:"yw_app",trader:common.isApp()?common.iOS()?"iphone":"androidphone":"h5",closesignature:"yes",signature_method:"md5",timestamp:(new Date).getTime(),signature:"****",siteid:common.getSiteId(),provinceId:common.cookie("provinceId")||1,provinceName:common.cookie("provinceName")||"上海",locatecityname:common.cookie("locateCityName"),locateprovinceid:common.cookie("locateProvinceId")||1,token:gltoken};common.Ajax({url:url,data:data,type:"get",success:function(res){var r=JSON.parse(res);if(r&&"0"==r.rtn_code){if(window.NTKF_PARAM){window.NTKF_PARAM.uid=r.data.userId;window.NTKF_PARAM.uname=r.data.userName}if(1==r.data.is_vip){common.cookie("is_vip",r.data.is_vip,7);common.cookie("is_expire",r.data.is_expire,7);common.cookie("vip_begin_date",1e3*r.data.vip_begin_date,7);common.cookie("vip_end_date",1e3*r.data.vip_end_date,7);if(window.NTKF_PARAM&&0==r.data.is_expire){window.NTKF_PARAM.usertag="2";window.NTKF_PARAM.userrank="2"}else if(window.NTKF_PARAM){window.NTKF_PARAM.usertag="3";window.NTKF_PARAM.userrank="3"}}else if(window.NTKF_PARAM){window.NTKF_PARAM.usertag="3";window.NTKF_PARAM.userrank="3"}}}})},showTracelessPop:function(){common.hasCookie()&&common.hasLocalStorage()&&common.hasSessionStorage()||common.msgShow("您的浏览器可能是在无痕/隐私模式下，可以试试关闭无痕/隐私模式后再访问本页面。",10)},hasLocalStorage:function(){var t="";try{window.localStorage.setItem("testLocalStorage","true");t=window.localStorage.getItem("testLocalStorage")}catch(e){t=""}if(t&&"true"==t){window.localStorage.removeItem("testLocalStorage");return!0}console.log("no support localStorage");return!1},hasCookie:function(){var t="";common.cookie("testCookie","true",1);try{t=common.cookie("testCookie")}catch(e){t=document.cookie||""}if("true"==t)return!0;console.log("no support cookie");return!1},hasSessionStorage:function(){var t="";try{window.sessionStorage.setItem("testSessionStorage","true");t=window.sessionStorage.getItem("testSessionStorage")}catch(e){t=""}if(t&&"true"==t){window.sessionStorage.removeItem("testSessionStorage");return!0}console.log("no support sessionStorage");return!1},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPod/i)},isAndroid:function(){return!!navigator.userAgent.match(/Android/i)},isApp:function(){return!!navigator.userAgent.match(/app_sdk/i)},isIpad:function(){return!!navigator.userAgent.match(/iPad/i)},isAndroidpad:function(){return-1<navigator.userAgent.indexOf("Android")||-1<navigator.userAgent.indexOf("Linux")&&-1<navigator.userAgent.indexOf("pad")},isWap:function(){return!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)},isJSON:function(str){if("string"==typeof str){try{if("object"==typeof JSON.parse(str))return!0}catch(e){}return!1}},getSiteId:function(){var siteId=9,channel=common.cookie("fromWhere");if(common.isApp()){common.isAndroid()&&(siteId=7);common.isIpad()&&(siteId=6);common.isAndroidpad()&&(siteId=7);common.iOS()&&(siteId=3)}else if(channel)switch(channel){case"0":siteId=17;break;case"1":siteId=18;break;case"2":siteId=22;break;case"3":siteId=23;break;case"18":siteId=19;break;case"CIGNACMB":siteId=41}else siteId=common.isWap()?9:0;return siteId},msgShow:function(msg,time){layer.open({content:msg,type:0,skin:"msg",shade:0,time:time||2})},alertShow:function(msg,callback){layer.open({content:msg,type:0,skin:"alert",shade:!0,shadeClose:!0,btn:"close",yes:function(){layer.closeAll();callback&&callback()}})},autoLogin:function(cf){common.isApp()?jsBridge.autoLogin(function(res){0==res.errcode?location.reload():cf()}):cf()},unionLogin:function(){if(!common.isApp()){var hashParams=common.getLocationParam("?"+window.location.hash.split("?")[1]);hashParams.tracker_u&&common.cookie("tracker_u",hashParams.tracker_u,1);if("50000037"==hashParams.tracker_u&&hashParams.asthmaParams){var data={tradername:"yw_app",trader:common.isApp()?common.iOS()?"iphone":"androidphone":"h5",closesignature:"yes",signature_method:"md5",timestamp:(new Date).getTime(),signature:"****",siteid:common.getSiteId(),from:"xcgj",params:decodeURIComponent(hashParams.asthmaParams),provinceId:common.cookie("provinceId")||1,provinceName:common.cookie("provinceName")||"上海",locatecityname:common.cookie("locateCityName"),locateprovinceid:common.cookie("locateProvinceId")||1},url=protocol+"//gateway.fangkuaiyi.com/xpassport/open_login";common.Ajax({url:url,data:data,type:"post",success:function(res){var r=JSON.parse(res);if(r&&"0"==r.rtn_code){common.cookie("UserInfo",r.data.loginStr,1);common.cookie("fromWhere","1",1);common.cookie("gltoken",r.data.newtoken,1)}}})}}},successTip:function(msg,time){layer.open({type:1,shadeClose:!1,time:time||2,shade:!1,content:'  <div class="message_layer_ show_msg"><i class="success_ico"></i><p class="message_name">'+msg||"操作成功！</p></div>"})},loading:function(options){var defaultOptions_text=(options=options||{}).text||"正在加载";common.isApp()&&jsBridge.hideLoading();".yyw-loading-modal{box-sizing:border-box;width:2.18666667rem;height:2.18666667rem;padding-top:0.42666667rem;background-color:rgba(38,45,86,0.4);border-radius:0.26666667rem;transform:translateY(-1.466666666rem) scale(0.61)}";".yyw-loading-circle{width:0.93333333rem;height:0.93333333rem;margin:0 auto;position:relative}";".yyw-loading-logo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:0.24rem;height:0.42666667rem}";".yyw-loading-circle-bottom{position:absolute;top:0;left:0;right:0;bottom:0;border:0.08rem solid #fff;border-radius:50%}";".yyw-loading-circle-left{position:absolute;top:0;left:0;right:50%;bottom:0;overflow:hidden}";'.yyw-loading-circle-left:before{content:"";display:block;position:absolute;top:0;left:0;right:-100%;bottom:0;border:0.08rem solid #5577FB;border-left-color:transparent;border-bottom-color:transparent;border-radius:50%;transform:rotate(45deg);animation:circle-left-animation 0.8s ease-out infinite}';".yyw-loading-circle-right{position:absolute;top:0;left:50%;right:0;bottom:0;overflow:hidden}";'.yyw-loading-circle-right:before{content:"";display:block;position:absolute;top:0;left:-100%;right:0;bottom:0;border:0.08rem solid #5577FB;border-top-color:transparent;border-right-color:transparent;border-radius:50%;transform:rotate(45deg);animation:circle-right-animation 0.8s ease-in infinite}';".yyw-loading-text{margin:0 0.13333333rem;font-size:0.44rem;font-weight:500;color:#FFFFFF;line-height:0.61rem;text-align:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}";"@keyframes circle-left-animation{0%{transform:rotate(45deg)}50%{transform:rotate(45deg)}100%{transform:rotate(225deg)}}";"@keyframes circle-right-animation{0%{transform:rotate(45deg)}50%{transform:rotate(225deg)}100%{transform:rotate(225deg)}}";"</style>";var htmlCode='<div class="yyw-loading-modal">';htmlCode+='<div class="yyw-loading-circle">';htmlCode+='<img class="yyw-loading-logo" alt="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAACRklEQVRIS6WVTYjMcRjHP999mSWv7d7k9SIlxKZQojhoykFpym5exoGbA5s40JJQ4kA5ESkuDmpzkay8RGqSyEuU9uDgoLDCTsw8erb/MDM7v99/8DvO//l9+j6/7/d5RvzH+TR4r7s08uVNVzY7rH/hmFkncATYCgw8zOW2/zXIzFYBZ4D5QAtwbSif72kaZGYTgL3AbmBiVSeHkfqbApnZAuAssBxorXuOnKSrUZCZtQM7gH6gC6ivLwGLJD0PgsxsJnAayAIObHTeA/MkfR4DMjP/bSNwAnBYTPV9YK2kYk1RYuvRxNZxTUTjHLBTUvk3yMymAceAuQnAvy2JtOVluyR5FP7INjPPRKZKhbdVACZFlK2RNFgDqi82sy3AeaAtAPru6iW9SwNdBnoial4DiyV9C4KSFL9IXAuxrgMbJP2MgVYCN4GOiKLjkvZXvjfMiJl5kg+mZKhX0pUgKAmkB21FRE0Z6Jb0JAaaBTwFJkdAHxLHPsZAvcDFiO1+9xGwWtJIDHQJ2JwyHl6T99FoCDKz8cBLwNuLnT5JJ6sL6ofWH/gWkDaw6yTdiIEOAIdSbC8mO2ioISix/Q7gYYydt8BCSV9DoBnAM2BKCshbWi/pRwi0CXA3QtNeuXcK8Me2EOgCsC1FjX922z1nNWfUNTNzl3za56SAPDdLJT0OgZYBt5uw/UGy7H2pjVVUKhb3tWQyvvRD/xj+Hj4W3tarRqpHLw4XCnvap3ZWln5NXdms1NqWGeiYPf1uZRsGQU08cGrJL/+guUE+xCY6AAAAAElFTkSuQmCC">';htmlCode+='<div class="yyw-loading-circle-bottom"></div>';htmlCode+='<div class="yyw-loading-circle-left"></div>';htmlCode+='<div class="yyw-loading-circle-right"></div>';htmlCode+="</div>";htmlCode+='<div class="yyw-loading-text">'+defaultOptions_text+"</div>";htmlCode+="</div>";layer.open({type:1,shade:!0,shadeClose:!1,style:"border:none;background:none;box-shadow:none;",content:'<style type="text/css">.yyw-loading-modal{box-sizing:border-box;width:2.18666667rem;height:2.18666667rem;padding-top:0.42666667rem;background-color:rgba(38,45,86,0.4);border-radius:0.26666667rem;transform:translateY(-1.466666666rem) scale(0.61)}.yyw-loading-circle{width:0.93333333rem;height:0.93333333rem;margin:0 auto;position:relative}.yyw-loading-logo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:0.24rem;height:0.42666667rem}.yyw-loading-circle-bottom{position:absolute;top:0;left:0;right:0;bottom:0;border:0.08rem solid #fff;border-radius:50%}.yyw-loading-circle-left{position:absolute;top:0;left:0;right:50%;bottom:0;overflow:hidden}.yyw-loading-circle-left:before{content:"";display:block;position:absolute;top:0;left:0;right:-100%;bottom:0;border:0.08rem solid #5577FB;border-left-color:transparent;border-bottom-color:transparent;border-radius:50%;transform:rotate(45deg);animation:circle-left-animation 0.8s ease-out infinite}.yyw-loading-circle-right{position:absolute;top:0;left:50%;right:0;bottom:0;overflow:hidden}.yyw-loading-circle-right:before{content:"";display:block;position:absolute;top:0;left:-100%;right:0;bottom:0;border:0.08rem solid #5577FB;border-top-color:transparent;border-right-color:transparent;border-radius:50%;transform:rotate(45deg);animation:circle-right-animation 0.8s ease-in infinite}.yyw-loading-text{margin:0 0.13333333rem;font-size:0.44rem;font-weight:500;color:#FFFFFF;line-height:0.61rem;text-align:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}@keyframes circle-left-animation{0%{transform:rotate(45deg)}50%{transform:rotate(45deg)}100%{transform:rotate(225deg)}}@keyframes circle-right-animation{0%{transform:rotate(45deg)}50%{transform:rotate(225deg)}100%{transform:rotate(225deg)}}</style>'+htmlCode})},loadingClose:function(){layer.closeAll()},xhr:function(url,data,method,callback){url=url||"";method=method||"";callback=callback||function(){};if("object"==typeof(data=data||{})){for(var queryString="",keys=function(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys}(data),i=0;i<keys.length;i++){queryString+=encodeURIComponent(keys[i])+"="+encodeURIComponent(data[keys[i]]);i!=keys.length-1&&(queryString+="&")}url+=""+queryString}else"function"==typeof data&&(callback=method=data);if("function"==typeof method){callback=method;method="callback"}Date.now||(Date.now=function(){return(new Date).getTime()});var timestamp=Date.now(),generatedFunction="jsonp"+Math.round(timestamp+1000001*Math.random());window[generatedFunction]=function(json){callback(json);try{delete window[generatedFunction]}catch(e){window[generatedFunction]=void 0}};-1===url.indexOf("?")?url+="?":url+="&";var jsonpScript=document.createElement("script");jsonpScript.setAttribute("src",url+method+"="+generatedFunction);document.getElementsByTagName("head")[0].appendChild(jsonpScript)},strLimit:function(str,num){return str&&str.length>num?str.slice(0,num)+"...":str},localStorage:{setItem:function(key,value){common.hasLocalStorage()?"object"==typeof value?window.localStorage.setItem(key,JSON.stringify(value)):window.localStorage.setItem(key,value):common.isApp()||("object"==typeof value?common.cookie(key,JSON.stringify(value),1):common.cookie(key,value,1))},getItem:function(key){if(common.hasLocalStorage()){var val=window.localStorage.getItem(key)||"";common.isJSON(val)&&(val=JSON.parse(val));return val}if(!common.isApp())return common.cookie(key)},removeItem:function(key){common.hasLocalStorage()?window.localStorage.removeItem(key):common.isApp()||common.cookie(key,"",-1)},clear:function(){common.hasLocalStorage()&&window.localStorage.clear()}},sessionStorage:{setItem:function(key,value){common.hasSessionStorage()?"object"==typeof value?window.sessionStorage.setItem(key,JSON.stringify(value)):window.sessionStorage.setItem(key,value):common.isApp()||("object"==typeof value?common.cookie(key,JSON.stringify(value),.04):common.cookie(key,value,.04))},getItem:function(key){if(common.hasSessionStorage()){var val=window.sessionStorage.getItem(key)||"";0<val.search(/:/i)&&(val=JSON.parse(val));return val}if(!common.isApp())return common.cookie(key)},removeItem:function(key){common.hasSessionStorage()?window.sessionStorage.removeItem(key):common.isApp()||common.cookie(key,"",-1)},clear:function(){common.hasSessionStorage()&&window.sessionStorage.clear()}},setSessionStorage:function(data){common.hasSessionStorage()&&("object"==typeof data.value?window.sessionStorage.setItem(data.key,JSON.stringify(data.value)):"string"==typeof data.value&&window.sessionStorage.setItem(data.key,data.value))},getSessionStorage:function(key){if(common.hasSessionStorage()){var val=window.sessionStorage.getItem(key)||"";0<val.search(/:/i)&&(val=JSON.parse(val));return val}return""},checkObjectNull:function(obj){for(var name in obj)if(obj.hasOwnProperty(name))return!1;return!0},getLocationParam:function(p){for(var params=(p||window.location.search).toString().slice(1).split("&"),returnObject={},i=0;i!=params.length;i++){var index=params[i].indexOf("=");returnObject[params[i].slice(0,index)]=params[i].slice(index+1)}return returnObject},getCartKey:function(callback){var url=protocol+"//gateway.fangkuaiyi.com/shoppingcart/cartkey?tradername=yw_app&trader=h5&closesignature=yes&signature_method=md5&timestamp="+(new Date).getTime()+"&signature=****&siteid=9";common.xhr(url,callback)},getParam:function(name){var reg=new RegExp("(^|&|/?)"+name+"=([^(&|#|/)]*)(&|$|#|/)"),r=window.location.href.substr(1).match(reg);return null!=r?unescape(r[2]):null},cookie:function(name,value,days,isDays){isDays=null==isDays||isDays;if(void 0===value){var cookies=("; "+window.document.cookie).split("; "+name+"=");if(2<=cookies.length){0<(val=decodeURIComponent(cookies.pop().split(";").shift())).search(/:/i)&&(val=JSON.parse(val));"UserInfo"==name&&0<=val.indexOf('"')?val=val.replace(/"/g,""):"UserInfo"==name&&val.indexOf("&")<0&&(val=decodeURIComponent(val));return val}return null}!1===value&&(days=-1);var expires="",date=new Date;if(days&&isDays){date.setTime(date.getTime()+24*days*60*60*1e3);expires="; expires="+date.toGMTString()}else if(days&&!isDays){date.setTime(days);expires="; expires="+date.toGMTString()}var val="UserInfo"==name?value:encodeURIComponent(value);window.document.cookie=name+"="+val+expires+"; path=/;domain=111.com.cn"},getUserInfoInAppH5:function(appKeyName,h5KeyName){if(common.isApp()){var url=common.getCookieInAppH5("UserInfo","UserInfo");if(url){var reg=new RegExp("(^|&)"+appKeyName+"=([^&]*)(&|$)","i"),r=url.match(reg);return null!=r?unescape(r[2]):null}return null}return common.cookie(h5KeyName)},getCookieInAppH5:function(appKeyName,h5KeyName){if(common.isApp()){if(-1==window.location.protocol.toLowerCase().indexOf("file"))return appKeyName?common.cookie(appKeyName):null;var obj=common.localStorage.getItem("appCookie");for(var x in obj)obj[x]=window.decodeURIComponent(window.decodeURIComponent(obj[x]));return appKeyName&&obj.hasOwnProperty(appKeyName)?obj[appKeyName]:null}return h5KeyName?common.cookie(h5KeyName):null},formatPhone:function(phone){return phone&&phone.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},checkMobile:function(mobile){return/^1[0-9]\d{9}$/.test(mobile)},checkEmail:function(email){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(email)},checkIdentityCard:function(card){return/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(card)},isLogin:function(cf){if(common.isApp())jsBridge.isLogin({},function(res){cf(res.data.result)});else{var token=null==common.cookie("gltoken")?"":common.cookie("gltoken");if(!token&&!(token=null==common.cookie("token")?"":common.cookie("token"))){var userInfo=common.cookie("UserInfo")||"";if(userInfo)try{token=common.getLocationParam("?"+userInfo).Token}catch(e){console.log(e);token=""}}cf(!!token)}},inWechat:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},inWXMiniprogram:function(){return"miniprogram"==navigator.userAgent.toLowerCase().match(/miniprogram/i)||"miniprogram"==window.__wxjs_environment},inBDMiniprogram:function(){var ua=navigator.userAgent.toLowerCase();return!(!ua.match(/baidu/i)||!ua.match(/swan/i))},inMiniprogram:function(){return!(!common.inWXMiniprogram()&&!common.inBDMiniprogram())},setPageTitle:function(title){if(void 0!==title&&window.document.title!==title){document.title=title;var mobile=navigator.userAgent.toLowerCase();if(/iphone|ipad|ipod/.test(mobile)&&common.inWechat()){var iframe=document.createElement("iframe");iframe.style.display="none";iframe.setAttribute("src","/favicon.ico");var iframeCallback=function(){setTimeout(function(){iframe.removeEventListener("load",iframeCallback);document.body.removeChild(iframe)},0)};iframe.addEventListener("load",iframeCallback);document.body.appendChild(iframe)}}},createUUID:function(){for(var s=[],i=0;i<36;i++)s[i]="ABCDE6709abcdef".substr(Math.floor(16*Math.random()),1);s[14]="4";s[19]="ABCDE6709abcdef".substr(3&s[19]|8,1);s[8]=s[13]=s[18]=s[23]="-";return s.join("")},getUUID:function(){if(common.isApp()){var ua_=navigator.userAgent.split("@");if(1<ua_.length)return ua_[1];var uuid=common.createUUID();common.cookie("UUID",uuid,7);return uuid}if(common.cookie("UUID"))return common.cookie("UUID");uuid=common.createUUID();common.cookie("UUID",uuid,7);return uuid},Ajax:function(options){function setTime(callback,script){void 0!==timeOut&&(timeout_flag=setTimeout(function(){if("jsonp"===dataType){delete window[callback];document.body.removeChild(script)}else{timeout_bool=!0;xhr&&xhr.abort()}},timeOut))}var url=options.url||"",type=(options.type||"get").toLowerCase(),data=options.data||null,contentType=options.contentType||"",dataType=options.dataType||"",async=void 0===options.async||options.async,timeOut=options.timeOut,before=options.before||function(){},error=options.error||function(){},success=options.success||function(){},timeout_bool=!1,timeout_flag=null,xhr=null;!function(){if(data){"string"==typeof data?data=function(data){for(var arr=data.split("&"),i=0,len=arr.length;i<len;i++){name=encodeURIComponent(arr[i].split("=")[0]);value=encodeURIComponent(arr[i].split("=")[1]);arr[i]=name+"="+value}return arr}(data):"object"==typeof data&&(data=function setObjData(data,parentName){function encodeData(name,value,parentName){var items=[];name=void 0===parentName?name:parentName+"["+name+"]";if("object"==typeof value&&null!==value)items=items.concat(setObjData(value,name));else{name=encodeURIComponent(name);value=encodeURIComponent(value);items.push(name+"="+value)}return items}var value,arr=[];if("[object Array]"==Object.prototype.toString.call(data))for(var i=0,len=data.length;i<len;i++){value=data[i];arr=arr.concat(encodeData("object"==typeof value?i:"",value,parentName))}else if("[object Object]"==Object.prototype.toString.call(data))for(var key in data){value=data[key];arr=arr.concat(encodeData(key,value,parentName))}return arr}(data));data=data.join("&").replace("/%20/g","+");"get"!==type&&"jsonp"!==dataType||(url+=-1<url.indexOf("?")?-1<url.indexOf("=")?"&"+data:data:"?"+data)}}();before();("jsonp"===dataType?function(){var script=document.createElement("script"),callback="JSONP_"+((new Date).getTime()+Math.round(1e3*Math.random()));window[callback]=function(data){clearTimeout(timeout_flag);document.body.removeChild(script);success(data)};script.src=url+(-1<url.indexOf("?")?"&":"?")+"callback="+callback;script.type="text/javascript";document.body.appendChild(script);setTime(callback,script)}:function(){(xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var versions=["Microsoft","msxm3","msxml2","msxml1"],i=0;i<versions.length;i++)try{return new ActiveXObject(versions[i]+".XMLHTTP")}catch(e){}}()).open(type,url,async);"post"!==type||contentType?contentType&&xhr.setRequestHeader("Content-Type",contentType):xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");xhr.onreadystatechange=function(){if(4===xhr.readyState){if(void 0!==timeOut){if(timeout_bool){error(xhr.status,"timeout");return}clearTimeout(timeout_flag)}200<=xhr.status&&xhr.status<300||304==xhr.status?success(xhr.responseText):error(xhr.status,xhr.statusText)}};xhr.send("get"===type?null:data);setTime()})()}},protocol=common.isApp()?"https:":window.location.protocol;protocol=0==protocol.indexOf("file:")?"https:":protocol;window.addEventListener("error",function(e){var opt={};opt.reportInfo={message:e.message||"",fileName:e.filename||"",errorType:"JS"};opt.pageInfo=window.location.href;opt.logType="error";opt.logCode="YYWE00006";opt.reportTitle="jsError";if("IMG"==e.target.tagName)try{opt.reportTitle="imageError";opt.reportInfo.fileName=e.target.src;opt.reportInfo.errorType="IMG";opt.logCode="YYWE00010";opt.reportInfo.className=e.target.className}catch(e){console.log(e)}else if("SCRIPT"==e.target.tagName)try{opt.reportTitle="jsError";opt.reportInfo.fileName=e.target.src;-1<e.target.src.indexOf("ntalker.com")?opt.logCode="YYWE00011":-1<e.target.src.indexOf("nest.111.com.cn")&&(opt.logCode="YYWE00012");opt.reportInfo.errorType="JS";opt.reportInfo.className=e.target.className}catch(e){console.log(e)}common.submitError(opt)},!0);window.addEventListener("load",function(){common.sendOfflineErrorLog()});"function"==typeof define&&define.amd?define(common):window.common=common;if(!Object.assign)try{Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(target,firstSource){"use strict";if(null==target)throw new TypeError("Cannot convert first argument to object");for(var to=Object(target),i=1;i<arguments.length;i++){var nextSource=arguments[i];if(null!=nextSource)for(var keysArray=Object.keys(Object(nextSource)),nextIndex=0,len=keysArray.length;nextIndex<len;nextIndex++){var nextKey=keysArray[nextIndex],desc=Object.getOwnPropertyDescriptor(nextSource,nextKey);void 0!==desc&&desc.enumerable&&(to[nextKey]=nextSource[nextKey])}}return to}})}catch(e){console.log(e)}}(window);!function(window){"use strict";var extendParams={},_point={ywid:"",bizModel:"",prcpnId:"",productType:"",newUserFrom:"",hashChange:0,needSendAppRefer:!1,afterInit:!1,lastAppReferCode:"",site:"",pos:"",provinces:[{id:107,isDeleted:0,provinceId:"5",provinceName:"江苏",showOrder:97,site:"2"},{id:110,isDeleted:0,provinceId:"14",provinceName:"福建",showOrder:0,site:"3"},{id:112,isDeleted:0,provinceId:"16",provinceName:"山东",showOrder:90,site:"1"},{id:99,isDeleted:0,provinceId:"3",provinceName:"天津",showOrder:94,site:"1"},{id:123,isDeleted:0,provinceId:"25",provinceName:"西藏",showOrder:0,site:"3"},{id:120,isDeleted:0,provinceId:"12",provinceName:"四川",showOrder:95,site:"3"},{id:98,isDeleted:0,provinceId:"2",provinceName:"北京",showOrder:99,site:"1"},{id:126,isDeleted:0,provinceId:"28",provinceName:"青海",showOrder:0,site:"2"},{id:104,isDeleted:0,provinceId:"10",provinceName:"吉林",showOrder:82,site:"2"},{id:121,isDeleted:0,provinceId:"23",provinceName:"贵州",showOrder:93,site:"3"},{id:125,isDeleted:0,provinceId:"27",provinceName:"甘肃",showOrder:0,site:"2"},{id:108,isDeleted:0,provinceId:"6",provinceName:"浙江",showOrder:96,site:"2"},{id:100,isDeleted:0,provinceId:"4",provinceName:"河北",showOrder:78,site:"1"},{id:127,isDeleted:0,provinceId:"30",provinceName:"宁夏",showOrder:0,site:"2"},{id:113,isDeleted:0,provinceId:"17",provinceName:"河南",showOrder:89,site:"2"},{id:119,isDeleted:0,provinceId:"7",provinceName:"重庆",showOrder:84,site:"3"},{id:124,isDeleted:0,provinceId:"26",provinceName:"陕西",showOrder:91,site:"1"},{id:105,isDeleted:0,provinceId:"11",provinceName:"黑龙江",showOrder:83,site:"2"},{id:109,isDeleted:0,provinceId:"13",provinceName:"安徽",showOrder:0,site:"2"},{id:115,isDeleted:0,provinceId:"19",provinceName:"湖南",showOrder:87,site:"3"},{id:122,isDeleted:0,provinceId:"24",provinceName:"云南",showOrder:92,site:"3"},{id:111,isDeleted:0,provinceId:"15",provinceName:"江西",showOrder:0,site:"3"},{id:102,isDeleted:0,provinceId:"8",provinceName:"内蒙古",showOrder:80,site:"2"},{id:103,isDeleted:0,provinceId:"9",provinceName:"辽宁",showOrder:81,site:"1"},{id:106,isDeleted:0,provinceId:"1",provinceName:"上海",showOrder:100,site:"2"},{id:114,isDeleted:0,provinceId:"18",provinceName:"湖北",showOrder:88,site:"3"},{id:118,isDeleted:0,provinceId:"22",provinceName:"海南",showOrder:85,site:"3"},{id:101,isDeleted:0,provinceId:"32",provinceName:"山西",showOrder:79,site:"2"},{id:128,isDeleted:0,provinceId:"29",provinceName:"新疆",showOrder:0,site:"2"},{id:116,isDeleted:0,provinceId:"20",provinceName:"广东",showOrder:98,site:"3"},{id:117,isDeleted:0,provinceId:"21",provinceName:"广西",showOrder:86,site:"3"}],pageValue:"",locateProvinceId:"",locateCityName:"",referPageCode:"",referPageValue:"",getParam:function(name){var reg=new RegExp("(^|&|/?)"+name+"=([^(&|#|/)]*)(&|$|#|/)"),r=window.location.href.substr(1).match(reg);return null!=r?unescape(r[2]):null},getHashParam:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)"),p=window.location.hash.split("?")[1],r=p?p.match(reg):null;return null!=r?unescape(r[2]):null},getLocate:function(cb){_point.Ajax({url:"https://pubapi.111.com.cn/api/location/ip?ip=client",dataType:"jsonp",type:"get",success:function(res){if(res&&"0"==res.status&&res.content){var p=res.content.address_detail.province,c=res.content.address_detail.city;c=c.replace("市","");var province=_point.provinces.filter(function(item){return-1<p.indexOf(item.provinceName)});if(1==province.length&&province[0].provinceId){_point.cookie("locateProvinceId",province[0].provinceId,1/24);_point.cookie("locateProvinceName",province[0].provinceName,1/24);if(!_point.cookie("provinceId")){_point.cookie("provinceId",province[0].provinceId,1/24);_point.cookie("provinceName",province[0].provinceName,1/24)}}_point.cookie("locateCityName",c,1/24);_point.locateProvinceId=_point.cookie("locateProvinceId")||"";_point.locateProvinceName=_point.cookie("locateProvinceName")||"";_point.locateCityName=_point.cookie("locateCityName")||""}cb&&(cb.bind?cb.bind(_point):cb)()}})},hasSessionStorage:function(){var t="";try{window.sessionStorage.setItem("testSessionStorage","true");t=window.sessionStorage.getItem("testSessionStorage")}catch(e){t=""}if(t&&"true"==t){window.sessionStorage.removeItem("testSessionStorage");return!0}console.log("no support sessionStorage");return!1},sessionStorage:{setItem:function(key,value){_point.hasSessionStorage()?"object"==typeof value?window.sessionStorage.setItem(key,JSON.stringify(value)):"string"==typeof value&&window.sessionStorage.setItem(key,value):_point.isApp()||("object"==typeof value?_point.cookie(key,JSON.stringify(value),.04):"string"==typeof value&&_point.cookie(key,value,.04))},getItem:function(key){if(_point.hasSessionStorage()){var val=window.sessionStorage.getItem(key)||"";0<val.search(/:/i)&&(val=JSON.parse(val));return val}if(!_point.isApp())return _point.cookie(key)},removeItem:function(key){_point.hasSessionStorage()?window.sessionStorage.removeItem(key):_point.isApp()||_point.cookie(key,"",-1)},clear:function(){_point.hasSessionStorage()&&window.sessionStorage.clear()}},cookie:function(name,value,days,isDays){isDays=null==isDays||isDays;if(void 0===value){var cookies=("; "+window.document.cookie).split("; "+name+"=");if(2<=cookies.length){0<(val=decodeURIComponent(cookies.pop().split(";").shift())).search(/:/i)&&(val=JSON.parse(val));"UserInfo"==name&&0<=val.indexOf('"')?val=val.replace(/"/g,""):"UserInfo"==name&&val.indexOf("&")<0&&(val=decodeURIComponent(val));return val}return null}!1===value&&(days=-1);var expires="",date=new Date;if(days&&isDays){date.setTime(date.getTime()+24*days*60*60*1e3);expires="; expires="+date.toGMTString()}else if(days&&!isDays){date.setTime(days);expires="; expires="+date.toGMTString()}var val="UserInfo"==name?value:encodeURIComponent(value);window.document.cookie=name+"="+val+expires+"; path=/;domain=111.com.cn"},Ajax:function(options){function setTime(callback,script){void 0!==timeOut&&(timeout_flag=setTimeout(function(){if("jsonp"===dataType){delete window[callback];document.body.removeChild(script)}else{timeout_bool=!0;xhr&&xhr.abort()}console.log("timeout")},timeOut))}var url=options.url||"",type=(options.type||"get").toLowerCase(),data=options.data||null,contentType=options.contentType||"",dataType=options.dataType||"",async=void 0===options.async||options.async,timeOut=options.timeOut,before=options.before||function(){},error=options.error||function(){},success=options.success||function(){},timeout_bool=!1,timeout_flag=null,xhr=null;!function(){if(data){"string"==typeof data?data=function(data){for(var arr=data.split("&"),i=0,len=arr.length;i<len;i++){name=encodeURIComponent(arr[i].split("=")[0]);value=encodeURIComponent(arr[i].split("=")[1]);arr[i]=name+"="+value}return arr}(data):"object"==typeof data&&(data=function setObjData(data,parentName){function encodeData(name,value,parentName){var items=[];name=void 0===parentName?name:parentName+"["+name+"]";if("object"==typeof value&&null!==value)items=items.concat(setObjData(value,name));else{name=encodeURIComponent(name);value=encodeURIComponent(value);items.push(name+"="+value)}return items}var value,arr=[];if("[object Array]"==Object.prototype.toString.call(data))for(var i=0,len=data.length;i<len;i++){value=data[i];arr=arr.concat(encodeData("object"==typeof value?i:"",value,parentName))}else if("[object Object]"==Object.prototype.toString.call(data))for(var key in data){value=data[key];arr=arr.concat(encodeData(key,value,parentName))}return arr}(data));data=data.join("&").replace("/%20/g","+");"get"!==type&&"jsonp"!==dataType||(url+=-1<url.indexOf("?")?-1<url.indexOf("=")?"&"+data:data:"?"+data)}}();before();("jsonp"===dataType?function(){var script=document.createElement("script"),callback="JSONP_"+((new Date).getTime()+Math.round(1e3*Math.random()));window[callback]=function(data){clearTimeout(timeout_flag);document.body.removeChild(script);success(data)};script.src=url+(-1<url.indexOf("?")?"&":"?")+"callback="+callback;script.type="text/javascript";document.body.appendChild(script);setTime(callback,script)}:function(){(xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var versions=["Microsoft","msxm3","msxml2","msxml1"],i=0;i<versions.length;i++)try{return new ActiveXObject(versions[i]+".XMLHTTP")}catch(e){}}()).open(type,url,async);"post"!==type||contentType?contentType&&xhr.setRequestHeader("Content-Type",contentType):xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");xhr.onreadystatechange=function(){if(4===xhr.readyState){if(void 0!==timeOut){if(timeout_bool)return;clearTimeout(timeout_flag)}200<=xhr.status&&xhr.status<300||304==xhr.status?success(xhr.responseText):error(xhr.status,xhr.statusText)}};xhr.send("get"===type?null:data);setTime()})()},autumn:function(){var u=navigator.userAgent,isAndroid=-1<u.indexOf("android"),isWap=(u.indexOf("iphone"),!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/));return _point.isApp()?isAndroid?"android":"ios":isWap?"wap":"offical"},versionCode:function(){if(_point.isApp()){var _u;return 0<(_u="ios"==_point.autumn()?navigator.userAgent.split("@")[2]:navigator.userAgent.split("@")[3].split(" ")[0]).indexOf("v")||1*_u==NaN?"523":_u}return 0},base:function(e,fn){var AbTestSwitch,AbTestCode,refer=e?encodeURIComponent(_point.subStringUrl(e.oldURL)):encodeURIComponent(_point.subStringUrl(document.referrer));if(-1<window.location.protocol.toLocaleLowerCase().indexOf("file"))jsBridge.getAppCookie({},function(res){var param={autumn:_point.autumn(),site:_point.site,uuid:_point.getUUID(),AbTestCode:res.data.AbTestCode||"",AbTestSwitch:res.data.AbTestSwitch||"{}",UserId:_point.cookie("JUD")||"",token:res.data.gltoken||"",osVersion:res.data.osVersion,provinceId:res.data.provinceId,provinceName:decodeURIComponent(res.data.provinceName||""),locateProvinceId:res.data.locateProvinceId||"",locateProvinceName:res.data.locateProvinceName||"",locateCityName:decodeURIComponent(res.data.locateCityName||""),os:res.data.os,version:res.data.appVersion,brower:"",tracker_u:res.data.app_tracker_u||"",app_tracker_u:res.data.app_tracker_u||"",channelname:res.data.appChannelName||"",referrer:refer,referPageCode:_point.referPageCode||"",referPageValue:_point.referPageValue||"",visitid:_point.cookie("visitid")||"",cururl:e?encodeURIComponent(_point.subStringUrl(e.newURL)):encodeURIComponent(_point.subStringUrl(document.location.href))};fn(param)});else{AbTestSwitch={};AbTestCode=_point.cookie("AbTestCode")||"";if(_point.cookie("AbTestSwitchCode"))for(var AbTestSwitchCode=_point.cookie("AbTestSwitchCode").split(","),i=0;0<(i<AbTestSwitchCode.length);i++)_point.cookie(AbTestSwitchCode[i])&&(AbTestSwitch[AbTestSwitchCode[i]]=_point.cookie(AbTestSwitchCode[i]));var u=navigator.userAgent,param={autumn:_point.autumn(),site:_point.site,os:_point.autumn(),version:"",brower:encodeURIComponent(encodeURIComponent(u)),uuid:_point.getUUID(),AbTestCode:AbTestCode,AbTestSwitch:JSON.stringify(AbTestSwitch),osVersion:u.substring(u.indexOf("(")+1,u.indexOf(")")),UserId:_point.cookie("JUD"),token:_point.cookie("gltoken")||"",provinceId:_point.cookie("provinceId"),provinceName:decodeURIComponent(_point.cookie("provinceName")),locateProvinceId:_point.locateProvinceId||"",locateProvinceName:_point.locateProvinceName||"",locateCityName:decodeURIComponent(_point.locateCityName||""),tracker_u:_point.cookie("tracker_u")||"",channelname:_point.isApp()?_point.cookie("appChannelName"):"",app_tracker_u:_point.cookie("app_tracker_u")||"",referrer:refer,referPageCode:_point.referPageCode||"",referPageValue:_point.referPageValue||"",visitid:_point.cookie("visitid"),cururl:e?encodeURIComponent(_point.subStringUrl(e.newURL)):encodeURIComponent(_point.subStringUrl(document.location.href))};fn(param)}},subStringUrl:function(url){for(var str=["/pay/","/cart/","/personalcenter/","/search/","/shopdetail/","/category/","/home/","/login/","/order/"],i=0;i<str.length;i++)if(0<url.indexOf(str[i]))return"https://m.111.com.cn/yyw/wap"+url.substring(url.indexOf(str[i]));return url},_url:function(opt,e){if(opt&&"string"!=typeof opt){if(opt&&"object"==typeof opt){action=(eventuuid=opt&&opt.eventuuid||"")?"click":"none";action=opt&&opt.action||action;var itemId=opt&&opt.itemId||"",pageCreateTime=opt&&opt.pageCreateTime||null,pageApiTime=opt&&opt.pageApiTime||null,pageLoadTotalTime=opt&&opt.pageLoadTotalTime||null}}else{var eventuuid;(eventuuid=opt||"")&&5==eventuuid.split("_").length&&(eventuuid+="_0");var action=eventuuid?"click":"none"}var proList=["floorId","floorPosition","sectionId","sectionPosition","itemId","itemPosition"],tempParamString=eventuuid.split("_").map(function(item){return"null"==item.toLowerCase()?"":item}).reduce(function(res,vitem,index){return res+="&"+proList[index]+"="+vitem},"");_point.cookie("cururl",document.location.href,1);document.querySelector("body");var ywid=_point.ywid||getPageCodeByCurrUrl(),sendToAddress="";try{if(ywid&&"product"==ywid){document.querySelector(".send_to");var spans=target.querySelector("span");0<spans.length&&(sendToAddress=spans[0].innerText+"省"+spans[1].innerText)}}catch(e){}if(ywid){var extendParamsQueryString="";for(var key in extendParams)extendParamsQueryString+="&"+key+"="+extendParams[key];if("report"!=action){"none"==action&&(_point.afterInit=!0);_point.base(e,function(that){var uu="https://nest.111.com.cn?uuid="+that.uuid+"&os_version="+that.osVersion+"&action="+action+"&site="+that.site+"&operator=null&autumn="+that.autumn+"&version="+that.version+"&os="+that.os+"&brower="+that.brower+"&token="+that.token+"&pos="+_point.pos+"&provinceId="+that.provinceId+"&provinceName="+that.provinceName+"&locateProvinceId="+that.locateProvinceId+"&locateProvinceName="+that.locateProvinceName+"&locateCityName="+that.locateCityName+"&sendToAddress="+sendToAddress+"&userid="+that.UserId+"&refer="+that.referrer+"&ReferPageCode="+that.referPageCode+"&ReferPageValue="+that.referPageValue+"&cururl="+that.cururl+"&AbTestSwitch="+that.AbTestSwitch+"&AbTestCode="+that.AbTestCode+"&tracker_u="+that.tracker_u+"&channelname="+that.channelname+"&visitid="+that.visitid+"&pagecode="+ywid+"&pagevalue="+_point.pageValue+"&biz_model="+_point.bizModel+"&prcpn_id="+_point.prcpnId+"&product_type="+_point.productType+"&newuserfrom="+_point.newUserFrom+"&app_tracker_u="+that.app_tracker_u+"&time="+(new Date).getTime()+tempParamString;extendParamsQueryString&&(uu+=extendParamsQueryString);(new Image).src=uu})}else"report"==action&&_point.base(e,function(that){var uu="https://nest.111.com.cn?uuid="+that.uuid+"&os_version="+that.osVersion+"&action="+action+"&site="+that.site+"&operator=null&autumn="+that.autumn+"&version="+that.version+"&os="+that.os+"&brower="+that.brower+"&token="+that.token+"&provinceId="+that.provinceId+"&provinceName="+that.provinceName+"&locateProvinceId="+that.locateProvinceId+"&locateProvinceName="+that.locateProvinceName+"&locateCityName="+that.locateCityName+"&sendToAddress="+sendToAddress+"&userid="+that.UserId+"&refer="+that.referrer+"&ReferPageCode="+that.referPageCode+"&cururl="+that.cururl+"&AbTestSwitch="+that.AbTestSwitch+"&AbTestCode="+that.AbTestCode+"&tracker_u="+that.tracker_u+"&channelname="+that.channelname+"&visitid="+that.visitid+"&pagecode="+ywid+"&itemId="+itemId+"&pageCreateTime="+pageCreateTime+"&pageApiTime="+pageApiTime+"&pageLoadTotalTime="+pageLoadTotalTime+"&pagevalue="+_point.pageValue+"&app_tracker_u="+that.app_tracker_u+"&time="+(new Date).getTime()+tempParamString;extendParamsQueryString&&(uu+=extendParamsQueryString);(new Image).src=uu})}},createUUID:function(){for(var s=[],i=0;i<36;i++)s[i]="ABCDE6709abcdef".substr(Math.floor(16*Math.random()),1);s[14]="4";s[19]="ABCDE6709abcdef".substr(3&s[19]|8,1);s[8]=s[13]=s[18]=s[23]="-";return s.join("")},getUUID:function(){var uuid=_point.createUUID();if(_point.isApp())return uuid=navigator.userAgent.split("@")[1];_point.cookie("UUID")?_point.cookie("UUID"):_point.cookie("UUID",uuid,7);return _point.cookie("UUID")},initPageSpeed:function(){var that=_point;window.addEventListener&&window.addEventListener("load",function(){setTimeout(function(){var p=window.performance||window.msPerformance||window.webkitPerformance;if(p){var timeInfo=p.timing,DOMContentLoadedTime=timeInfo.domContentLoadedEventEnd-timeInfo.fetchStart,pageApiTime=timeInfo.responseEnd-timeInfo.fetchStart,totalDomTime=timeInfo.domComplete-timeInfo.fetchStart;that._url({action:"report",itemId:"pagePerformance",pageCreateTime:DOMContentLoadedTime,pageApiTime:pageApiTime,pageLoadTotalTime:totalDomTime})}},0)})},init:function(){var tracker_u=_point.getParam("tracker_u")||_point.getHashParam("tracker_u");_point.pageValue=window.YW_POINT_PAGEVALUE||"";if(tracker_u)_point.cookie("tracker_u",tracker_u,2);else{var seoTrackerU=seoTrackerList.filter(function(o){return 0<o.domain.filter(function(c){return-1<document.referrer.indexOf(c)}).length})[0];if(seoTrackerU&&seoTrackerU.tracker){tracker_u=seoTrackerU.tracker;_point.cookie("tracker_u",tracker_u,2)}}_point.initPageSpeed();_point.pageHide();_point.referPageCode||getReferInfo();var hostname=window.location.hostname;_point.site=0<hostname.indexOf("yaoex.com")?"b2b":"b2c";window.preventAutoSendPointDataFlag&&1==window.preventAutoSendPointDataFlag||_point._url();document.querySelector("body").addEventListener("click",function(e){var p=e.target,i=0;do{if(p&&"HTML"==p.tagName)return;if(p&&p.getAttribute("data-ywpoint")){_point._url(p.getAttribute("data-ywpoint"));break}p=p&&p.parentNode;i++}while(i<5)})},go:function(eventuuid){getAppReferPageCode(_point._url,eventuuid)},track:function(param){if("object"==typeof param){_point.lastAppReferCode=_point.ywid;_point.lastAppReferValue=_point.pageValue;_point.ywid=param.ywid||_point.ywid;_point.pageValue=param.pageValue||_point.pageValue||"";_point.action=param.action||"";_point.eventuuid=param.eventuuid||"";_point.bizModel=param.bizModel||"";_point.prcpnId=param.prcpnId||"";_point.productType=param.productType||"";_point.newUserFrom=param.newUserFrom||"";_point.pos=param.pos||"";extendParams=param.extendParams||{};if(_point.ywid&&!_point.eventuuid&&(!_point.action||"none"==_point.action)){if(_point.hashChange){getReferInfo();--_point.hashChange}_point.updateRefer();_point.hashChange++;_point.isApp()&&_point.afterInit&&(_point.needSendAppRefer=_point.lastAppReferCode!=_point.ywid)}getAppReferPageCode(function(cf){_point._url(cf);if("undefined"!=typeof jsBridge&&jsBridge.updateAppStorage&&_point.ywid&&!_point.eventuuid&&_point.isApp()&&(!_point.action||"none"==_point.action)){jsBridge.updateAppStorage({key:"wReferPageCode",value:_point.ywid},function(){});jsBridge.updateAppStorage({key:"ReferPageValue",value:param.pageValue||_point.appReferValue||""},function(){})}},{eventuuid:_point.eventuuid,action:_point.action})}},isApp:function(){return!!navigator.userAgent.match(/app_sdk/i)},setStatistics4BD:function(){!function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?2e38bf5ce2344d7ee09541a02f110af0";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)}()},hashchange:function(){window.addEventListener("hashchange",function(e){_point.go(null,e)},!1)},updateRefer:function(){!function(pagecode){var cururl=location.href,pageValue="",rule={list:{regexp:/[?|&](?:searchWord|categoryName|couponBatchCode)=([^&]*)(&|$)/},product:{regexp:/\/item\/(\d+)/},orderDetail:{regexp:/\/orderDetail\/(\d+)/},maps:{regexp:/pageId=(\d+)/},mapsmore:{regexp:/pageId=(\d+)/}},currentRule=rule[pagecode];pageValue=currentRule?cururl.match(currentRule.regexp)&&cururl.match(currentRule.regexp)[1]:"";pageValue=rule[pagecode]&&rule[pagecode].hasOwnProperty("regexp")?pagecode+"|"+pageValue:pageValue;_point.appReferValue=pageValue;_point.cookie("referPageValue",pageValue,(new Date).getTime()+6e5,!1)}(function(){var pagecode=getPageCodeByCurrUrl();new Date;_point.cookie("referPageCode",pagecode,(new Date).getTime()+6e5,!1);return pagecode}())},pageHide:function(){window.addEventListener("pagehide",function(e){_point.updateRefer()})}},seoTrackerList=[{domain:["www.baidu.com"],tracker:"SEO2020001"},{domain:["m.baidu.com",,"https://baidu.com/"],tracker:"SEO2020002"},{domain:["sm.cn"],tracker:"SEO2020004"},{domain:["www.sogou.com"],tracker:"SEO2020005"},{domain:["m.sogou.com","wap.sogou.com","3g.sogou.com"],tracker:"SEO2020006"},{domain:["www.so.com"],tracker:"SEO2020007"},{domain:["m.so.com"],tracker:"SEO2020008"},{domain:["google.com"],tracker:"SEO2020009"},{domain:["toutiao.com"],tracker:"SEO2020010"}];function getPageCodeByCurrUrl(){var currUrl=String(window.location),pathName=String(window.location.pathname);if(currUrl.indexOf("yyw/wap/")<0&&"home"==document.querySelector("body").getAttribute("data-yywid"))return"home";var preFix=_point.isApp()?"/h5root/modules/":currUrl.indexOf("yyw/wap/")<0?"":"/yyw/wap/",tag=function(ary,fnc){for(var i=0,len=ary.length;i<len;i++)if(fnc(ary[i]))return ary[i];return""}(["category/","login/","vip/","cart/","order/","pay/","personalcenter/","item/","searchList/","/cart/","/pay/","/login/","/personalcenter/","remaps/"],function(item){return expMatch(pathName,preFix+item)}),pageCode="";tag&&tag.replace&&(tag=tag.replace("/",""))&&(tag=tag.replace("/",""));currUrl=currUrl.replace(tag,"");switch(tag){case"category":pageCode="cat";break;case"login":pageCode=expMatch(currUrl,"quickLogin")?"register":"login";break;case"vip":pageCode=expMatch(currUrl,"index")?"memberHome":"mermberPay";break;case"cart":pageCode="2"==_point.sessionStorage.getItem("pageType")?"demandList":"querycart";break;case"order":pageCode=["orderList","logisticsDetail","productComment","orderDetail","returnList","returnProduct"][findIndex(["orderList","logisticDetail","review","orderDetail","rebackList","rebackGoods"],function(item){return expMatch(currUrl,item)})]||"";break;case"pay":var recipe_id=_point.getHashParam("recipe_id");"needcheck"==(pageCode=["queryCouponOrder","orderSuccess","bankSelect","orderConfirm","needcheck"][findIndex(["coupon","paySucc","pay/1","orderConfirm","demandConfirm"],function(item){return expMatch(currUrl,item)})])&&recipe_id&&(pageCode="needcheckDC");break;case"personalcenter":pageCode=["health","queryCoupon","addressManage","feedBack","addressModify","about","provinceLocation","commonList","setting","browseHistory","collection","accountManager","salesServe"][findIndex(["health","coupon","addressManage/1/","helpAdviseSubmit","addressManage/1/null/notice/","aboutUs","city","usedlist","setting","footPrint","collect","accountCenter","saleService"],function(item){return expMatch(currUrl,item)})]||"myCenter";break;case"item":pageCode=expMatch(currUrl,"comment")?"productCommentList":"product";break;case"searchList":pageCode=expMatch(currUrl,"searchList")?"list":"search";break;case"remaps":pageCode=expMatch(currUrl,"productMore")?"mapsmore":"maps";break;default:pageCode=expMatch(currUrl,"b_wap_service_page")?"registerAgreement":document.querySelector("body").getAttribute("data-ywid")}return pageCode;function expMatch(source,expStr){var regexp=new RegExp(function(source){return String(source).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}(expStr),"gi");return!!String(source).match(regexp)}function findIndex(ary,fnc){for(var i=0,len=ary.length;i<len;i++)if(fnc(ary[i]))return i;return-1}}function getReferInfo(){if(1==((performance=window.performance||window.msPerformance||window.webkitPerformance)&&performance.navigation?performance.navigation.type:0)){_point.referPageValue=_point.cookie("lastReferPageValue");_point.referPageCode=_point.cookie("lastReferPageCode")}else{_point.referPageValue=_point.cookie("referPageValue");_point.cookie("lastReferPageValue",_point.referPageValue||"");_point.cookie("referPageValue","");_point.referPageCode=_point.cookie("referPageCode");_point.cookie("lastReferPageCode",_point.referPageCode||"");_point.cookie("referPageCode","")}var performance}function getAppReferPageCode(cb,param){562<_point.versionCode()&&"undefined"!=typeof jsBridge&&jsBridge.getAppRefer?jsBridge.getAppRefer({},function(res){var refer=res.data&&res.data.refer||"";if("glWebVC"==refer)jsBridge.queryAppStorage({key:"wReferPageCode"},function(res){_point.referPageCode=res.data.value||"";jsBridge.queryAppStorage({key:"ReferPageValue"},function(res){_point.referPageValue=res.data.value||"";"function"==typeof cb&&(param?cb(param):cb())})});else{_point.referPageCode=_point.needSendAppRefer?_point.lastAppReferCode:refer;_point.referPageValue=_point.needSendAppRefer?_point.lastAppReferValue:"";"function"==typeof cb&&(param?cb(param):cb())}}):"function"==typeof cb&&(param?cb(param):cb())}window.cb=function(o){return o};var hideAdv=_point.getParam("hideAdv")||_point.getHashParam("hideAdv");hideAdv&&"1"==hideAdv&&_point.cookie("hideAdv",hideAdv,2);if(_point.isApp())getAppReferPageCode(_point.init);else if(_point.cookie("locateProvinceId")&&_point.cookie("locateCityName")){_point.locateProvinceId=_point.cookie("locateProvinceId")||"";_point.locateProvinceName=_point.cookie("locateProvinceName")||"";_point.locateCityName=_point.cookie("locateCityName")||"";_point.init()}else _point.getLocate(_point.init);"function"==typeof define&&define.amd?define(_point):window.ywPoint=_point}(window);!function(window){window.ywIM={_slaUrl:"https://m.111.com.cn/yyw/activities/consultForm/#/",_slaForceLoginSwitch:0,_slaIdentitySwitch:0,_slaGoodSwitch:0,_slaAjaxLock:!1,_backupSwitch:!1,_backupAjaxLock:!1,_backupLinkedUrlKf:"",_backupLinkedUrlYs:"",_selfIMurl:"https://im.111.com.cn/yyw-im/pc/YYWIM.html",_getMpDepartmentIdLock:!1,setNTalkerParams:function(callback){if(void 0!==window.NTKF_PARAM){var uid="",uname="",userInfo=common.isApp()?common.localStorage.getItem("appCookie").UserInfo:common.cookie("UserInfo");if(userInfo){userInfo=decodeURIComponent(decodeURIComponent(userInfo));uid=common.getUrlParams("UserId",userInfo)||"";uname=common.getUrlParams("UserName",userInfo)||""}if(window.NTKF_PARAM){window.NTKF_PARAM.uid=uid;window.NTKF_PARAM.uname=decodeURIComponent(uname)}}"function"==typeof callback&&callback()},getSlaSwitch:function(callback){window.ywIM._slaAjaxLock||common.Ajax({url:"https://gateway.fangkuaiyi.com/presale/getImLoginSwitchInfo?"+common.objectToUrlQueryString(common.getAjaxRequestCommonParams("h5")),data:{},type:"get",before:function(){window.ywIM._slaAjaxLock=!0},error:function(){window.ywIM._slaAjaxLock=!1},success:function(res){window.ywIM._slaAjaxLock=!1;"string"==typeof res&&(res=JSON.parse(res));if("0"==res.rtn_code){window.ywIM._slaForceLoginSwitch=res.data.forceLoginSwitch?1:0;window.ywIM._slaIdentitySwitch=res.data.identityFormSwitch?1:0;window.ywIM._slaGoodSwitch=res.data.goodsFormSwitch?1:0}else common.msgShow(res.rtn_msg);"function"==typeof callback&&callback()}})},getBackupSwitch:function(callback){window.ywIM._backupAjaxLock||common.Ajax({url:"https://presale.111.com.cn/disaster/guardSwitch/query",data:{platform:3},type:"post",before:function(){window.ywIM._backupAjaxLock=!0},error:function(){window.ywIM._backupAjaxLock=!1},success:function(res){window.ywIM._backupAjaxLock=!1;"string"==typeof res&&(res=JSON.parse(res));if(0==res.statusCode){if(1==res.data.status){window.ywIM._backupSwitch=!0;res.data.linkedUrlKf&&(window.ywIM._backupLinkedUrlKf=res.data.linkedUrlKf);res.data.linkedUrlYs&&(window.ywIM._backupLinkedUrlYs=res.data.linkedUrlYs)}}else common.msgShow(res.message);"function"==typeof callback&&callback()}})},getGrayUserStatus:function(callback){common.getABTest({expCodeList:["EXP_IM_1"],callback:function(){"function"==typeof callback&&callback()}})},getMpDepartmentId:function(params,callback){window.ywIM._getMpDepartmentIdLock||common.Ajax({url:"https://gateway.fangkuaiyi.com/presale/queryGroupId?"+common.objectToUrlQueryString(common.getAjaxRequestCommonParams("h5")),data:params,type:"post",before:function(){window.ywIM._getMpDepartmentIdLock=!0},error:function(){window.ywIM._getMpDepartmentIdLock=!1;callback(!1)},success:function(res){window.ywIM._getMpDepartmentIdLock=!1;"string"==typeof res&&(res=JSON.parse(res));callback(res)}})},open:function(IMconfig,slaFlag){IMconfig?window.ywIM._checkStaffOrPharmacist(IMconfig,slaFlag):common.msgShow("IM参数不能为空")},_checkStaffOrPharmacist:function(IMconfig,slaFlag){IMconfig&&IMconfig.params&&IMconfig.params.type&&"pharmacist"==IMconfig.params.type&&!slaFlag?window.ywIM._checkSla(IMconfig):window.ywIM._checkBackup(IMconfig)},_checkSla:function(IMconfig){var params={identitySwitch:window.ywIM._slaIdentitySwitch,goodSwitch:window.ywIM._slaGoodSwitch,recepId:IMconfig.params.code,departmentId:"reserveValue",productId:IMconfig.params&&IMconfig.params.productId?IMconfig.params.productId:"",provinceId:common.getCookieInAppH5("provinceId","provinceId")||"1"},url=window.ywIM._slaUrl+"?"+common.objectToUrlQueryString(params);common.isLogin(function(res){res?0==window.ywIM._slaIdentitySwitch&&0==window.ywIM._slaGoodSwitch?window.ywIM._checkBackup(IMconfig):window.ywIM._openSla(url):1==window.ywIM._slaForceLoginSwitch?0==window.ywIM._slaIdentitySwitch&&0==window.ywIM._slaGoodSwitch?window.ywIM._openLogin(window.location.href):window.ywIM._openLogin(url):window.ywIM._checkBackup(IMconfig)})},_checkBackup:function(IMconfig){IMconfig&&IMconfig.params&&IMconfig.params.type?IMconfig.params.mpId?window.ywIM.getMpDepartmentId({business_id:IMconfig.params.mpId},function(res){if(res&&"0"==res.rtn_code&&res.data.id){IMconfig.params.departmentId=res.data.id;window.ywIM._getGrayStatus(IMconfig)}else if(res&&"0"==res.rtn_code&&res.data.phone){var phone='<a class="layerui-alert-tel" href="tel:'+res.data.phone+'">'+res.data.phone+"</a>";if(common.isApp()){var p={phoneNumber:res.data.phone};common.isAndroid()&&common.versionCode()<=583&&(p={tel:res.data.phone});phone='<a class="layerui-alert-tel" href="gl://tel?callid=11111&param='+encodeURIComponent(JSON.stringify(p))+'">'+res.data.phone+"</a>"}common.alertShow("当前客服不在线，可以拨打 "+phone+" 联系商家客服")}else res&&"0"==res.rtn_code?common.msgShow("商家客服缺少联系方式~"):common.msgShow("服务器开小差了~")}):window.ywIM._backupSwitch?window.ywIM._openBackup(IMconfig):window.ywIM._getGrayStatus(IMconfig):common.msgShow("无法区分药师与客服")},_getGrayStatus:function(IMconfig){window.ywIM._checkGrayUser(IMconfig)},_checkGrayUser:function(IMconfig){window.ywIM._openSelfIM(IMconfig)},_openLogin:function(url){common.isApp()?jsBridge.toNativedetail({topage:"login"},function(res){}):window.location.href="//m.111.com.cn/yyw/wap/login/index.html#/?returnUrl="+encodeURIComponent(url)},_openSla:function(url){common.isApp()?jsBridge.openWebView({params:{url:url,backward:!1,showNavigation:!1}},function(res){}):window.location.href=url},_openBackup:function(IMconfig){var url=IMconfig&&IMconfig.params&&IMconfig.params.type&&"staff"==IMconfig.params.type?window.ywIM._backupLinkedUrlKf:window.ywIM._backupLinkedUrlYs;common.isApp()?IMconfig.jumpReplace?window.location.replace(url):jsBridge.openWebView({params:{url:url,backward:!1,showNavigation:!1}},function(res){}):IMconfig.jumpReplace?window.location.replace(url):window.location.href=url},_openSelfIM:function(IMconfig){var departmentIdLists=[{departmentId:"100001",departmentName:"妇科",code:"yy_1000_1432121656411",codeName:"妇科"},{departmentId:"100002",departmentName:"皮肤科",code:"yy_1000_1432121570309",codeName:"皮肤性病"},{departmentId:"100003",departmentName:"内分泌科",code:"yy_1000_1432121588059",codeName:"糖尿病/内分泌科"},{departmentId:"100004",departmentName:"消化内科",code:"yy_1000_1432121618420",codeName:"消化科"},{departmentId:"100005",departmentName:"心血管内科",code:"yy_1000_1432121462212",codeName:"心脑血管"},{departmentId:"100006",departmentName:"男科",code:"yy_1000_1432121632560",codeName:"男科"},{departmentId:"100007",departmentName:"肝病科",code:"yy_1000_1432121556161",codeName:"肝胆科/肝病科"},{departmentId:"100008",departmentName:"泌尿外科",code:"",codeName:""},{departmentId:"100009",departmentName:"全科",code:"yy_1000_1432121505109",codeName:"全科药师"},{departmentId:"100010",departmentName:"有来合作科",code:"",codeName:""},{departmentId:"100011",departmentName:"五官科疾病",code:"yy_1000_1432120732700",codeName:"五官科疾病"},{departmentId:"100012",departmentName:"肿瘤科",code:"yy_1000_1432121479115",codeName:"肿瘤科"},{departmentId:"100014",departmentName:"神经科",code:"yy_1000_1432121524660",codeName:"神经科"},{departmentId:"100015",departmentName:"风湿骨科",code:"yy_1000_1432121542010",codeName:"风湿骨科"},{departmentId:"100016",departmentName:"呼吸科",code:"yy_1000_1432121604404",codeName:"呼吸科"},{departmentId:"100017",departmentName:"滋补科",code:"yy_1000_1432121644463",codeName:"滋补调养"},{departmentId:"100018",departmentName:"售前咨询",code:"yy_1000_1432121914627",codeName:"售前咨询"},{departmentId:"100019",departmentName:"售后咨询",code:"yy_1000_1432121926426",codeName:"售后咨询"},{departmentId:"100020",departmentName:"企业采购",code:"yy_1000_1432121940418",codeName:"企业采购"},{departmentId:"100021",departmentName:"散光验配",code:"yy_1000_1432121956474",codeName:"散光验配"},{departmentId:"100022",departmentName:"营养补充",code:"yy_1000_1432121967428",codeName:"营养保健/官网客服"},{departmentId:"100023",departmentName:"医疗器械",code:"yy_1000_1432121980277",codeName:"医疗器械/官网客服"},{departmentId:"100024",departmentName:"官网客服",code:"yy_1000_1432533694444",codeName:"官网客服"},{departmentId:"100025",departmentName:"医院处方项目",code:"",codeName:""},{departmentId:"100026",departmentName:"微信组",code:"",codeName:""},{departmentId:"100027",departmentName:"1诊医生",code:"",codeName:""},{departmentId:"100028",departmentName:"百度肿瘤",code:"",codeName:""},{departmentId:"100029",departmentName:"MP中西药品",code:"",codeName:""},{departmentId:"100030",departmentName:"药品咨询",code:"",codeName:""},{departmentId:"100031",departmentName:"中药抓药",code:"",codeName:""},{departmentId:"100032",departmentName:"售后指导用药",code:"",codeName:""},{departmentId:"100033",departmentName:"专科用药",code:"",codeName:""},{departmentId:"100034",departmentName:"寻医问药网",code:"",codeName:""},{departmentId:"100035",departmentName:"CMS专科",code:"",codeName:""},{departmentId:"100036",departmentName:"处方入口",code:"",codeName:""},{departmentId:"100037",departmentName:"图文处方测试",code:"",codeName:""},{departmentId:"100038",departmentName:"曲莱",code:"yy_1000_1496916409397",codeName:"曲莱"},{departmentId:"100039",departmentName:"微信专科入口",code:"",codeName:""},{departmentId:"100040",departmentName:"微信客服咨询入口",code:"yy_1000_1498530991889",codeName:"微信客服咨询入口"},{departmentId:"100041",departmentName:"新M站入口",code:"",codeName:""},{departmentId:"100042",departmentName:"短信入口",code:"",codeName:""},{departmentId:"100043",departmentName:"OTC咨询入口",code:"",codeName:""},{departmentId:"100044",departmentName:"合规",code:"",codeName:""},{departmentId:"100045",departmentName:"处方外流项目",code:"",codeName:""},{departmentId:"100046",departmentName:"PC首页入口",code:"",codeName:""}],departmentId="100009";if(IMconfig&&IMconfig.hasOwnProperty("params")&&IMconfig.params.hasOwnProperty("departmentId")&&IMconfig.params.departmentId&&"reserveValue"!=IMconfig.params.departmentId)departmentId=IMconfig.params.departmentId;else if(IMconfig&&IMconfig.hasOwnProperty("params")&&IMconfig.params.hasOwnProperty("code")&&IMconfig.params.code)for(var i=0;i<departmentIdLists.length;i++)if(IMconfig.params.code==departmentIdLists[i].code&&departmentIdLists[i].departmentId){departmentId=departmentIdLists[i].departmentId;break}var params={uid:common.getUserInfoInAppH5("UserId","userId")||"",system:"1_H5",nicName:common.getUserInfoInAppH5("UserName","userName")||"",productId:IMconfig&&IMconfig.params&&IMconfig.params.productId?IMconfig.params.productId:"",orderId:IMconfig&&IMconfig.params&&IMconfig.params.orderId?IMconfig.params.orderId:"",provinceId:IMconfig&&IMconfig.params&&IMconfig.params.provinceId?IMconfig.params.provinceId:common.getCookieInAppH5("provinceId","provinceId")||"1",department:departmentId},url=window.ywIM._selfIMurl+"?"+common.objectToUrlQueryString(params);IMconfig&&IMconfig.params&&IMconfig.params.param&&(url+="&param="+IMconfig.params.param);common.isApp()?IMconfig.jumpReplace?window.location.replace(url):jsBridge.openWebView({params:{url:url,backward:!1,showNavigation:!1}},function(res){}):IMconfig.jumpReplace?window.location.replace(url):window.location.href=url},_openNTalker:function(IMconfig){common.msgShow("小能已暂停支持，请重新配置IM接待组~")}};window.ywDoctor={_doctorUrl:"https://yzm.111.com.cn/m/yw-twwz/add_inquery.html",open:function(doctorConfig,callback){var params=doctorConfig.params?common.objectToUrlQueryString(doctorConfig.params):"",url=params?window.ywDoctor._doctorUrl+"?"+params:window.ywDoctor._doctorUrl;common.isApp()?jsBridge.openWebView({params:{url:url,backward:!1,showNavigation:!1}},function(res){"function"==typeof callback&&callback()}):doctorConfig.params.jumpReplace?window.location.replace(url):window.location.href=url}};window.ywFeedback={_feedbackUrl:"https://m.111.com.cn/yyw/wap/personalcenter/index.html#/helpAdviseSubmit",open:function(feedbackConfig,callback){var params=feedbackConfig.params?common.objectToUrlQueryString(feedbackConfig.params):"",url=params?window.ywFeedback._feedbackUrl+"?"+params:window.ywFeedback._feedbackUrl,appParams={topage:"feedback",params:{}};if(feedbackConfig.params)for(var key in feedbackConfig.params)appParams.params[key]=feedbackConfig.params[key];common.isApp()?jsBridge.toNativedetail(appParams,function(res){"function"==typeof callback&&callback()}):window.location.href=url}};window.openCustomerService=function(params){if((params=params||{}).mpId){var defaultParams={mpId:params.mpId||"",ntalkerId:params.ntalkerId||"",orderId:params.orderId||"",productId:params.productId||"",jumpReplace:params.jumpReplace||!1};window.ywIM.open({params:{mpId:defaultParams.mpId,code:defaultParams.ntalkerId,productId:defaultParams.productId,orderId:defaultParams.orderId,jumpReplace:defaultParams.jumpReplace,type:"staff"}})}else common.msgShow("商家参数不全~")};window.openCustomerServiceCenter=function(params){var productId=(params=params||{}).productId||"",orderId=params.orderId||"",defaultParams={appUrl:params.appUrl||"https://m.111.com.cn/yyw/activities/serviceCenter/#/index?productId="+productId+"&orderId="+orderId+"&forceRemote=1",h5Url:params.h5Url||"//m.111.com.cn/yyw/activities/serviceCenter/#/index?productId="+productId+"&orderId="+orderId,jumpReplace:params.jumpReplace||!1};common.isApp()?jsBridge.openWebView({params:{url:defaultParams.appUrl,backward:!1,showNavigation:!1}},function(res){}):defaultParams.jumpReplace?window.location.replace(defaultParams.h5Url):window.location.href=defaultParams.h5Url};window.openPharmacist=function(params){if((params=params||{}).ntalkerId){var defaultParams={ntalkerId:params.ntalkerId,productId:params.productId||"",orderId:params.orderId||"",jumpReplace:params.jumpReplace||!1};window.ywIM.open({params:{code:defaultParams.ntalkerId,productId:defaultParams.productId,orderId:defaultParams.orderId,jumpReplace:defaultParams.jumpReplace,type:"pharmacist"}})}else common.msgShow("药师参数不全")};window.openDoctor=function(params){var defaultParams={productId:(params=params||{}).productId||"",jumpReplace:params.jumpReplace||!1};window.ywDoctor.open({params:{productId:defaultParams.productId,jumpReplace:defaultParams.jumpReplace,channel:"yiyaoapp",provinceName:common.cookie("provinceName")||"",cityName:common.cookie("cityName")||"",searchKey:""}})};window.openAIDoctor=function(params,callback){var defaultParams={productId:(params=params||{}).productId||"",aiEntranceChanel:params.aiEntranceChanel||"",provinceName:common.cookie("provinceName")||"",provinceId:common.cookie("provinceId")||"",jumpReplace:params.jumpReplace||!1},url="https://yzm.111.com.cn/m/yw-twwz/ai_chat.html?"+common.objectToUrlQueryString(defaultParams);common.isApp()?jsBridge.openWebView({params:{url:url,backward:!1,showNavigation:!1}},function(res){"function"==typeof callback&&callback()}):defaultParams.jumpReplace?window.location.replace(url):window.location.href=url};window.openFeedback=function(params){var productId=(params=params||{}).productId||"",orderId=params.orderId||"",defaultParams={appUrl:params.appUrl||"https://m.111.com.cn/yyw/wap/personalcenter/#/feedbackFirst?productId="+productId+"&orderId="+orderId+"&forceRemote=1",h5Url:params.h5Url||"//m.111.com.cn/yyw/wap/personalcenter/#/feedbackFirst?productId="+productId+"&orderId="+orderId,jumpReplace:params.jumpReplace||!1};common.isApp()?jsBridge.openWebView({params:{url:defaultParams.appUrl,backward:!1,showNavigation:!1}},function(res){}):defaultParams.jumpReplace?window.location.replace(defaultParams.h5Url):window.location.href=defaultParams.h5Url};window.ywIM.setNTalkerParams(function(){});window.ywIM.getSlaSwitch(function(){});window.ywIM.getBackupSwitch(function(){})}(window);